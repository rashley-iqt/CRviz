{"version":3,"sources":["features/header/Header.module.css","features/hierarchy-selector/SelectedFieldList.module.css","features/search/SearchControls.module.css","features/header/crlogo.png","features/hierarchy-selector/AvailableFieldList.module.css","features/header/Header.js","features/hierarchy-selector/SelectedField.js","features/hierarchy-selector/SelectedFieldList.js","features/hierarchy-selector/AvailableField.js","features/hierarchy-selector/AvailableFieldList.js","features/hierarchy-selector/DropTarget.js","features/hierarchy-selector/HierarchySelector.js","features/misc-controls/FieldSelect.js","features/misc-controls/MiscControls.js","epics/search-dataset-epic.js","features/search/SearchControls.js","features/visualization/d3-viz/pack-grid.js","features/visualization/d3-viz/pack-with-label.js","features/visualization/d3-viz/to-hierarchy.js","features/visualization/d3-viz/datum-key.js","features/visualization/d3-viz/append-circles.js","features/visualization/d3-viz/text-utils.js","features/visualization/d3-viz/setup-zoom.js","features/visualization/d3-viz/setup-tooltip.js","features/visualization/d3-viz/color-scheme.js","features/visualization/d3-viz/setup-legend.js","features/visualization/d3-viz.js","features/visualization/Visualization.js","epics/refresh-dataset-epic.js","epics/upload-dataset-epic.js","features/dataset-controls/DatasetSelector.js","features/dataset-controls/DatasetUpload.js","features/dataset-controls/DatasetDownload.js","features/dataset-controls/DatasetRefresh.js","features/dataset-controls/DatasetTimedRefresh.js","features/dataset-controls/DatasetControls.js","App.js","registerServiceWorker.js","domain/filter.js","domain/root-reducer.js","epics/filter-dataset-epic.js","epics/root-epic.js","configure-store.js","index.js","features/visualization/Visualization.module.css","App.module.css","domain/controls.js","domain/error.js","epics/index-dataset-epic.js","features/dataset-controls/DatasetControls.module.css","features/misc-controls/MiscControls.module.css","epics/fetch-dataset-epic.js","epics/load-dataset-epic.js","domain/dataset.js"],"names":["module","exports","header","logo","appName","infoIcon","infoPopup","tagline","listContainer","isDropDisabled","droppable","draggable","field","groupBy","animated","groupByEnter","fieldName","dropTarget","isDraggingOver","dragHandle","searchControls","searchContainer","search","label","draggableContainer","dragForeignContainer","dragForeign","Header","state","showInfo","hideTooltip","_this","setState","showTooltip","react_default","a","createElement","className","style","href","target","rel","src","alt","id","onMouseEnter","this","onMouseLeave","index_es","icon","faInfoCircle","react_portal_tooltip_lib_default","active","position","parent","tooltipTimeout","process","React","Component","Field","_ref2","_classNames","displayName","dragIndex","provided","Object","assign","ref","innerRef","draggableProps","dragHandleProps","classNames","defineProperty","placeholder","SelectedField","_ref","_ref$count","count","index","draggableId","react_beautiful_dnd_esm","type","snapshot","SelectedFieldList","lastFields","toAnimate","props","fields","_this2","_this$props","values","getFieldId","droppableId","dragState","draggingOver","droppableProps","List","destination","length","differenceWith","eqBy","findIndex","isEmpty","map","hierarchy_selector_SelectedField","key","isNil","path","source","from","to","Math","min","max","defaultProps","AvailableField","objectSpread","transform","isDragging","AvailableFieldList","isDraggingForeign","sortBy","getCount","hierarchy_selector_AvailableField","concat","withPlaceholder","faTrashAlt","curry","contains","DropTarget","_classNames2","SELECTED_FIELD_LIST_ID","DROP_TARGET_ID","HierarchySelector","onDragStart","dragStart","onDragUpdate","dragUpdate","onDragEnd","dropResult","updateHierarchy","controls","hierarchyConfig","removeField","fieldId","newIndex","configuration","findFieldIndex","find","removeOld","identity","remove","addNew","insert","updatedHierarchy","compose","setHierarchyConfig","showNodes","availableFields","filter","f","groupable","marginBottom","hierarchy_selector_SelectedFieldList","selectedFieldListStyle","hierarchy_selector_DropTarget","hierarchy_selector_AvailableFieldList","availableFieldListStyle","list","matchId","equals","mapDispatchToProps","connect","selectMergedConfiguration","selectMergedValues","selectControls","fieldToString","join","prop","stringToField","string","split","propEq","FieldSelect","value","onChange","name","evt","dispatch","shouldShowNodes","useDarkTheme","darkTheme","colorBy","container","checkboxContainer","switch","checked","htmlFor","switchLabel","fieldSelect","misc_controls_FieldSelect","selector","searchDataset","createAction","performSearch","data","results","toFind","queryString","indices","searchIndices","hash","idxResults","toLowerCase","temp","Set","toConsumableArray","dataset","forEach","el","isSearchResult","r","push","searchDatasetEpic","action$","store","pipe","ofType","toString","mergeMap","payload","of","tap","setSearchResults","catchError","error","is","QueryParseError","setError","defaultState","hasSearch","Search","handleQueryStringChange","e","handleKeyPress","handleSearch","onKeyPress","onClick","title","faSearch","clearSearch","faTimesCircle","ownProps","keys","datasets","selectDataset","selectConfiguration","getSearchIndices","getSearchResults","eachWithIndex","addIndex","placeRows","rows","middleOut","maxRadii","maxRadius","ys","coordinatesForRadii","xs","row","i","node","j","x","y","apply","c","radii","diameters","first","reduce","add","coords","slicedToArray","lastRadius","currentRadius","last","aperture","above","reject","_","below","pickOdd","reverse","toRows","circles","splitEvery","ceil","sqrt","packGrid","enclosingCircle","packEnclose","radiusLeaf","radius","children","getLabelSize","labelRatio","packChildren","packSiblings","maxLabelRatio","padding","k","nonleafChildren","child","height","labelSize","paddingSize","enclosingRadius","translateChild","labelY","labelWidth","pow","packWithLabel","options","size","pack","root","eachBefore","eachAfter","d","arguments","undefined","nestHierarchy","nest","countSearchResults","result","searchResultCount","entriesToHierarchy","fieldValue","entries","chain","getLeaves","entry","head","tail","toHierarchy","nesting","d3Hierarchy","datumKey","datum","depth","uid","getLabelShape","top","startAngle","PI","acos","endAngle","shape","arc","closePath","appendCircles","nodeRoot","labelRoot","packedData","descendants","nodes","selectAll","exit","nodesEnter","enter","append","classed","merge","attr","order","select","labels","labelsEnter","countLabels","countLabelsEnter","text","context","document","getContext","measureText","memoizeWith","font","floor","width","fitText","original","textLength","slice","String","fromCharCode","hideSmall","tooSmall","fitCounts","countHeight","viewBound","fitVertically","labelText","maxWidth","zoomIdentity","translate","applyX","applyY","fitLabels","labelFont","labelHeight","boundWidth","boundHeight","nodeBound","boundOverlap","bound0","bound1","getLabelStyle","domElement","getComputedStyle","family","getPropertyValue","getFont","setupZoom","zoomRoot","transformRoot","zoomTo","zoomToTransform","zoomTransform","zoomBehavior","zoom","on","event","d3Event","call","viewPadding","rootR","rootX","rootY","scaleExtent","leaves","translateExtent","_getLabelStyle","_getLabelStyle2","_getLabelStyle3","_getLabelStyle4","countLabelFont","countLabelHeight","bound","nodesInView","labelsInView","labelsNotInView","countLabelsInView","hiddenCountLabels","animate","scale","transition","duration","offsetTop","offsetLeft","tooltip","content","innerHTML","cont","pairs","setupTooltip","boundingRect","getBoundingClientRect","left","colorScheme","extendColorScheme","extraLayers","extraColors","times","currentLayer","previous","hcl","neighbor","hScale","scaleLinear","domain","range","h","cScale","scalePow","exponent","lScale","l","updateLegend","_ref4","legend","colorMap","toggleValue","items","toPairs","_ref5","itemsEnter","disabled","_ref7","_ref8","color","_ref9","_ref11","createStylesheet","coloring","styleEnter","html","_ref13","_ref14","_ref14$","colorNodes","_ref15","getValue","coloredField","isColoringGroup","_ref16","_ref18","setupLegend","legendConfig","update","either","uniq","configs","zip","fromPairs","_ref3","allEqProps","o1","o2","allPass","eqProps","makeHierarchy","sort","composeComparators","b","localeCompare","comparators","reduceWhile","comparator","findAncestor","hierarchy","ancestors","findChild","reduced","d3Viz","rootNode","svg","clientWidth","clientHeight","selectedNode","nextProps","dataUpdated","sizeUpdated","legendUpdated","repack","rerender","resetLegend","resetZoom","ResizeSensor","debounce","_appendCircles","_appendCircles2","selected","Visualization","ReactDOM","findDOMNode","viz","updateFromProps","styles","PureComponent","owner","getQueryString","startRefresh","stopRefresh","refreshDatasetEpic","debounceTime","action","url","interval","timer","setIsFetching","isFetching","fetchDataset","takeUntil","uploadDataset","fromReader","file","Observable","create","observer","reader","window","FileReader","addEventListener","next","complete","readAsText","fromJson","JSON","parse","uploadDatasetEpic","CSVconvert","loadDataset","SyntaxError","newErr","Error","eqUrl","DatasetSelector","DatasetUpload","inputId","ownerUuid","display","files","faUpload","DatasetDownload","download","faDownload","DatasetRefresh","faRedoAlt","DatasetTimedRefresh","timerIsRunning","onIntervalChange","onStartClick","onStopClick","faSyncAlt","faStopCircle","uuidv4","require","CUSTOM_DATASET","authTypes","scheme","host","location","hostname","port","indexOf","parseInt","POSEIDON_DATASET","Modal","setAppElement","DatasetControls","classCallCheck","possibleConstructorReturn","getPrototypeOf","resetDataset","setDataset","selectedFile","fetchAndSetDataset","username","password","token","uuid","authHeader","buildAuthHeader","toURL","onSelected","removeDataset","removeSearchIndex","showUrlEntry","authScheme","refreshInterval","refreshTimerRunning","onUpload","onUrlChange","onTokenChange","onUsernameChange","onPasswordChange","onUrlOk","onUrlCancel","getDownloadUrl","urlObject","URL","webkitURL","json","stringify","blob","Blob","createObjectURL","onRefresh","onTimedRefreshStart","onTimedRefreshStop","onTimedRefreshIntervalChanged","numInt","isNaN","canDownload","canRefresh","dataControls","selectorContainer","dataset_controls_DatasetSelector","uploadContainer","dataset_controls_DatasetUpload","fileUpload","utilityContainer","dataset_controls_DatasetDownload","fileDownload","urlRefreshContainer","dataset_controls_DatasetRefresh","urlRefresh","dataset_controls_DatasetTimedRefresh","urlRefreshTime","faCog","lastUpdated","toLocaleDateString","toLocaleTimeString","lib_default","isOpen","onRequestClose","contentLabel","modal","modalMain","at","Token","userName","centerSpan","faCheck","faTimes","TypeError","Date","getIsFetching","getLastUpdated","App","showData","showGrouping","showFiltering","uuid1","uuid2","toggleShowData","toggleShowGrouping","toggleShowFiltering","onErrorClose","clearError","resetControls","_classNames3","_classNames4","_classNames5","_classNames6","_classNames7","hasDataset","appContainer","hideControls","header_Header","faHome","accordionHeader","faPlusCircle","faMinusCircle","section","hidden","dataset_controls_DatasetControls","SearchControls","hierarchySection","hierarchy_selector_HierarchySelector","misc_controls_MiscControls","dimSection","emptyDataset","canvas","visualization_Visualization","justifySpan","faDizzy","message","getError","isLocalhost","Boolean","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","setFilter","clearFilter","reducer","handleActions","_handleActions","filterString","isValid","compileExpression","combineReducers","filterDataset","applyFilter","filtered","item","filterDatasetEpic","empty","setFilteredDataset","rootEpic","combineEpics","loadDatasetEpic","fetchDatasetEpic","indexDatasetEpic","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","initialState","middleware","createEpicMiddleware","createStore","rootReducer","applyMiddleware","run","configureStore","render","es","src_App","getElementById","origin","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","lunr","buildIndex","searchResults","searchReducer","biowner","searchIndex","_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","rsowner","hasOwnProperty","generateIndex","configurationFor","flat","ds","cfg","flattened","flattenDataset","includes","buildIndexSuccess","urlContainer","switch-inner","Buffer","__webpack_require__","__webpack_exports__","redux_actions__WEBPACK_IMPORTED_MODULE_0__","redux_observable__WEBPACK_IMPORTED_MODULE_1__","rxjs__WEBPACK_IMPORTED_MODULE_2__","rxjs_ajax__WEBPACK_IMPORTED_MODULE_3__","rxjs_operators__WEBPACK_IMPORTED_MODULE_4__","rxjs_operators__WEBPACK_IMPORTED_MODULE_5__","rxjs_operators__WEBPACK_IMPORTED_MODULE_6__","rxjs_operators__WEBPACK_IMPORTED_MODULE_7__","domain_error__WEBPACK_IMPORTED_MODULE_8__","_load_dataset_epic__WEBPACK_IMPORTED_MODULE_9__","getScheme","Authorization","ajax","rxAjax","crossDomain","responseType","rxjs_operators__WEBPACK_IMPORTED_MODULE_3__","ramda__WEBPACK_IMPORTED_MODULE_7__","ramda__WEBPACK_IMPORTED_MODULE_8__","_index_dataset_epic__WEBPACK_IMPORTED_MODULE_9__","domain_error__WEBPACK_IMPORTED_MODULE_10__","domain_dataset__WEBPACK_IMPORTED_MODULE_11__","domain_controls__WEBPACK_IMPORTED_MODULE_12__","lines","trim","delimiter","hdr","delims","delim","finddelim","jsonstring","colnames","formatPayload","config","Array","ValidationError","obj","prototype","defaultItemState","fieldsFor","overrides","paths","pathsIn","_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","override","_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","removeFilteredDataset","_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","valuesFor","_ref6","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","some","err","return","vals","v","valSet","_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/main.79423398.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__22iYy\",\"logo\":\"Header_logo__1Q9PB\",\"appName\":\"Header_appName__3ZkiC\",\"infoIcon\":\"Header_infoIcon__37dfu\",\"infoPopup\":\"Header_infoPopup__vFXpZ\",\"tagline\":\"Header_tagline__2wfq6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listContainer\":\"SelectedFieldList_listContainer__EIgw3\",\"isDropDisabled\":\"SelectedFieldList_isDropDisabled__1B1mf\",\"droppable\":\"SelectedFieldList_droppable__V3oKO\",\"draggable\":\"SelectedFieldList_draggable__3a12H\",\"field\":\"SelectedFieldList_field__8d6UN\",\"groupBy\":\"SelectedFieldList_groupBy__ePIRe\",\"animated\":\"SelectedFieldList_animated__3juXQ\",\"groupByEnter\":\"SelectedFieldList_groupByEnter__q43mT\",\"fieldName\":\"SelectedFieldList_fieldName__3sCaz\",\"dropTarget\":\"SelectedFieldList_dropTarget__1Gpjc\",\"isDraggingOver\":\"SelectedFieldList_isDraggingOver__3fCS0\",\"dragHandle\":\"SelectedFieldList_dragHandle__2IDAD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchControls\":\"SearchControls_searchControls__3c9kl\",\"searchContainer\":\"SearchControls_searchContainer__11kME\",\"search\":\"SearchControls_search__1lu7v\",\"label\":\"SearchControls_label__3sWW2\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB1CAYAAACF+iUMAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4gMMBBEKLiu3kwAAGgBJREFUeNrtnXl8VNXZx793kpAAgUBkR+CCMMPiiOCu1fGqBXmtWhEVl6p1xQVrq1atgtXWutfaWqqtdcMFi+KCUvdhcFcQZFici+AVEFnDEiDbLO8f58xkGJPMPXeWTHjf5/PxYxLmnnvm/M7znGc/Gm2E/LobwzJT/9YV6Ap0AQYAbmAg0A/oCVQCHeR/GhABdgE7gU3ABuA7YCUQkr9vA6oMy9yV/G7gR+9vC6S1NWD9unssMAH4iQS2E9AxS68Lyw1QDawH3gBeMCxzeUsb7f8BdgioX3e7gKHAocB5wPGtNK1aYAYwE1hiWObqtgK4Vojg+nW3BtwBXApUAGUFNM1qKdbvNCxzRqGDrBUQuEWAD7gIOLeNSMBdwIPATMMyFxci2Fprc6v8+RfAA8A+gIu2R2HABM40LHNpIU3M1RrAxjeXX3ef79fdIeBpoHsbBRegGBgOLPHr7jf9uvu4Jr7v3s/BSWfsMcAr0sTZW+kr4HjDMre0pth25Zlrh/t19ywgkGNwa4A1wDLgc+BDYB7wKbBA2rwbgWgO5zAS2OzX3fcA7VuLm7V8cKz8+Wrgb1kcPib/vxN4C3gX+EiaMSpz7AAcAhwDjAEOkyI3m2tTBxiGZX6Sb0VMywP3DpZn7BFZGjIgwfwC+MqwzPXpnCN2nShJf/cABwKHAydKWzwb9G9gsmGZNfkCWcshsBpwpnQQZKqhbgH+aFjmw/lyMKRIn0rgD9KEa5fh0bYRGGVY5ro2ycHynHEBTwDnZzDUDuAvwCuGZS5sLc9RCtAl0lb/RYbfrQG4xrDMR/y6WzMsM1bwSlaSAtFeKjNOF2Ab8FvDMisMy7wNWJj8j/nWRpPfZ1hmA/CuYZkXILxrz0lnhyqVAP/w6+574uDmSgHTsrnL/bp7qDwf+zoYZiswGZhtWOaOQrZ/UrhaBy4GbnU43FuGZZ5YsBycBK4HCDoAtxaYZlhmpWGZz0rRXNCUIkUswzKnIKJa8xyYXmP9unuFX3eX54KTtSyB+xPg7bi9p0BzgKsMy7Ra43zNEUf/BBF16qU4jAkMMywzWhAAJ4F7sDRZVGin1IrvacvB9DRAvwiMV1zjDRLkrdna7FqG4O4vPUUqnLsSGGNY5ir2QkoB+TjgPcUhvjYsc1ghcPAA4Bvp9bFLMwzLPJv/A5TEBPsAc4H9FR5fhEhyaMiUi10OJq5JheADRXAvjoPb2hGWfCliEuQtwGjgKYXHDwQej4+RV4Cl3fY6IrHNrifqNMMyH8/XeRvweLP6uSxo2w2GZV4I/FPh8fP8untKpiBrKiJH0tPSk2OXhhqWGcqlhhzwePGFgk39fRAiztxB/imGcHuu9YWCW1tJdF+LyAKxQxHgaMMyP3G6fppdcOVOGidNG7uce4JhmYEcg9sXGAF4EVGhAwCPTem0CRFS/BKYDywHFvtCwUhLGycL5/IdwBSbj9UA/Q3L3JxGofPIjbzGsMzN8X9T4eC+wFqF7+M2LHNFrsANeLyXATcA/aUukA23axjhJ54FTPWFgqtyAbRcz5uBP9n8+HxENC7cRG74IESEradk2DDwkGGZN/l1d/pFSRLNzynM/4xsgZt8TgY83nEBj/eZgMcbBh4FBpN5dCeZiqXJdy6wMuDxBgMe73XJ+kY2zm25LncBT9p85GDgwtTz2K+7j5Jm574I/3Yxwkd+o193Pw9odkX0ucAzNidzqWGZj2WZWw8BXnPgHcoWRaWCdIUvFMwqR/t19xxgnM2P64Zlfpck6j8EjmpBGo3WbEygPyIP2A49Z1jmudkSywGP93jgNuDoArF+ahDZn3/yhYI1mQItubESkULUzcYjHwDHGpYZlWU7VWk+f4XLhmi+x+Z8NxmWeW4mZlBc/AU83uKAxzsdEZkqFHCR4vtWYH3A4x0ZB9ep2DYsE8MyqxScIEcnceyNNj7f2ZXGUB8BTLQx0C6pwTq22eLcEPB4x0oP2XkF7MfoDCwKeLyPARlzsWGZG4DrbT4yx6+7i4HLbHx2oSsN975t86X3Gpb5nRPuje9+Ce4twJuISsG2QBcHPN4qaarZ4mS/7k6sr6zmaOfX3UWGZT4A2EmaL0cUxXVK87ntwHKthYlMQIS90tEnhmUemYXzdjbws5zAEIsR2V2Dq7QdWnFxLt5QDZzrCwVnpzuXkxSkq4DTEdUc2+Ra/xNR1ZiNlOLFhmWObMm8uMHGIHXAGU7EctJ52yng8X6TM3CB0j69GTXzWXqcfBKxSCQXr+gEvBbweM+Ja9ktSEbNr7v9wMOAIR0zxyBSii1E0kA26NFmPVl+3e1DREDS0ZOGZf7SqdYc8HhLgMVkLy21CQMnyvC/P0S3n4rK0/d7D6C4oiKXYvt6Xyj4QHOc7Nfd56MWeHCqwGm04CCwM4GYYZm/VD13kzi3HJHFMDTXX9ZVUpLPc/n+NJx8eR7m8GpcYriaUAAOw16k6GInWnPSrn4L0Nk76dmAxzuumbN4vzy8/6k447lSD3/gLNK7/jYBr6qK5iTufQ44suBhijlOV44BswMe75AmtOsVOZ71bmBhnPGKk+1eSVfZGGS6NNCd2LnjAcdZHbFoFMJhYjFwlbbL3dFdW0tJ1y40bN+Bq53yezSgSEqpQSmcPA3RXyRXtDaexPijM9ivu89DOO/TKhKqb5XgDgReyoSjep58Er5VX3Pst19TUpmjAkVNY8S0v3LUws8Z9ud7KamsFBtLnQYGPN7n4xtcctVMCXzOdIA99I+Uf7zNxgB/MSwzpnL2BjzeuMb8vGOOqqvjgCf+xdAHGj2nHQYNzESMNo+vy0X7AcLX0vPnp3Dw67Modw9xCvKZAY/3cF8oGHdNhqVJeGaOtOd//QhgqVwNAHqneT4MPKNy9iaZC+MRpZnKIrmkaxcOeXM2XY48PCE+V937Z7Z++LHdgJjaOyMRzKm3s3OZ6J5UUlnJQa+/TLcxJzgB2YWIL++xjoZlzkSE+KYhghhZ1Z73AFiCNYL0/aZ2ICrXVUVzJxxWGZZ07syh78yho0dMun7zFj4zxrL28SdxleWu+c7OJUtZeNZ5rJ/ZeKKM+NuDdDvuWGLhsOpwvQMe77RkfUcySVjqPD2B2VmY9sxUszVZRI+3o34blhl2oDnf68h+bVfKqP88S1F5OQDb5y/g8+NPpKGqipyTphFraGD5r29g5V33NZ7NjzxM93FjnRwN5wQ83m5xjTqlqK3asMxTEH3APnQ44zDwSerR6Ur6wwQbg/xRVXOWSptyW6RobS2jZj5L+0EDAdj60ScsOus8onV1ORHLzVFReTnfP/EUK267I/G3offfTWnPHo09BuxRBTA51QGSlFOFYZnvG5Z5NKJEtVpxqqsNy1yVynwuKS50OYGWaLlhmVUqypU8e28nfeTjR9ryoBuvT4jl3StXsfSqa9Dy65FKWiUXax9/mpV3CgXPVVrKqJdm4CorVR1pasDjLW/KAZIC9DxEAsAtCkDf0ZwCgE279LVU0WKDg9sDN6mC265HD/pfcZnk5DoW/Gw80dq6VvV5FHXswNqnplM17wMA2nXvzpDbpziRJlPTaMHxH+sNy/yTYZmdEanKsTTPPdUSwOkiOTHgYwdRowucnH2jZkxP/Lrs2uuIRSMUAmkuF8FLrqTmO5HB1PPUk2nfvx+oadYnBzzesnSx4+QEO1lwfgjwcjMfn52qPSefwWWk9z2HEUVRSi5J4Oeqi9jztFMp7dsHgG2ff8HmN9/O65mbHmSN0E23irCjprH/Y/8goiZdhgLd7WSBpKz3AsMyxyMaw6xP4ejZzUlXFyLpqzzNuyIo+FClIqGh2B02WldHv0suTPy85LKrcJWWUmi0ff5Cdny5CID2/frR4yTlAv1fpTCCLbDl+fyZZMgLEOWmAO82J11diJ7L6ezfoINGIaejUJwWi0ToeuQRdNhPBFvWTX+OaE1NQXFvMhcvnfzrRiP3jAmqQ1yTpIQqgZzkKJluWGYvRJ31t81JVxciPSSd//ldB+swWUm3amhgyB2N+sf6Wa8UJLhxPaF+40Y2v/UOAJXGMaqpQCUBj/eADNyRyT9PaUk3cgFDbIz5gQP79xiVZzoM3o/2A/onzKLqxUsoZHK1a8eGl18VDg9No8/EM4g2NKgMcUK25tKSbuTCXgB6vuI7lROFy4cPQysqAuDb+x90YmPmnXYsWkwsLDT8fS+5mFh9vcrjB+e6fDUOcD8bO2STXRNJTlrJnopFIlSMHiVEcizGlvfn5ir7MatUu24dNZYFQGmvHpT121flcR0RM845wOnqfXaoODik4qCrAtx51EgAdi77unDP3tTFKylhw6uNMYKOgwerPN43XwBXpvmMk0LpAaoAJ9ySkiPaBBUVUTW3UT1R5OAe5KGds4v0PuidDsZVqgIsKi1NhP7qfljfZvDVXC52fv114vfSnj1UHi8DtFyfwy5E0LnFo8bBuPvYZ98YpX36JH5t2LyZNkWxGNEasUTFlV1Vw4jds11Y3hTA7XMwbmf76xOjpEuXxO+RXbtpaxSpEQkZRWVlqgD3zIeIrs/RuEqOg2TA2xwl5qysHJYUAsBODFLbKGlAZHdjR95cpsLm7CyWcepYuKHgLAAXorKtRR+Eg3HDKtxbv3FT45ZOEtfZ+5auHzNbtpg3GqW4s8hnCO9QTcJwpN8oA5zODHKSfFytBPCWLYlf26lporbGr/5qsVjNNWtwZdOBEovtoTnXb9qkysEb8wFwOrukApRrkJRUYc1VRO3qNcJ22HffrANs/eVvLDzjHOb/bDxF5R2zh28kQsVhhzay47ofVIfYkg8zaU26D/l1dzfF8lClCye04iKql4ji9o7uwVn/klpJCdXBJSJhL5viORKh+4ljEr/XfKvkpNkFxPJhJtlp63uQ4rirlQAoKmL7/AVCRHfrRtm+fVXTYFpHgSkro/IY0SMm1hBm14pvVB7fQG4v5koAHLLxOdViqW+Vz8klyxLV9/0vv5RofUPBA1w+fFgi6rXxjTnE1MKF3yMyZfKiZKWb2RjFcUOqE6kOLiFWJyy2nqedSnGXioIGNxaNUuk7OhHiXD3tUdUqxG/zBfA20l8NM1JlUF8oGFKdfLSujjVPPJ04k5PPtoKkSIS+F4hOT7tWfEPN6jV7mGM26FPV89dJLxQXoltauoCCy6+7hyiO/YbSRNq1Y/W0R4jKoPm+F55PtLa2ILGN1tejXzuZEtnrY9OcN50M844quDLxrpNfd0/w6+7x8t7FFoF3GZZZY0PrLUa9l8ZDymIvHOaHGaJzU8ehbnqfOcFJoVfOqbR3L/pdelHCFv7+GeWq2O2+UPAbRRPJ5dfdtyDi8zMRdda7/Lp7cksgx2XKa+nUIJpvetnspkP1DiRNY+2/n0z8OuT2qZT17VtY3Ftby4Crr0iEN80pv6chyVFjk+5z8OoZNF0b9lfghpayKgH+Y+MFp6icA75QMIaDbMya1atZdZ9oiO5qX8agm64vGC6ORaN0G3MCfc4+S5y95grWv/iyqnIVA/4l18iWaJbH4yktfGxqS2cwhmWuQLS+a4mG+XV3T0WHxyxlpaC0lLX/foIdC74EoPu4sQye+rusOymcUFmfPgx7sJH5Vky53ckwi4FtdsWzXG8fLQd9yv26e3hLHAz2emfcovhlnsdhODJ0y20JW7jv+efRa8L4hAKWf9aNUVxRwagZ0ynqKFydq+59gK2ffuZktOd9oWC9Xe6VdI1NhbnFP9rhtol+3W07fOgLBaPAdU5WYffKVSw6q7GseOh9d9HvogtVnQlZoaLycka//ALteon4/Jb3/ax94mmK2qvnSvhCQbvtmeNa836kT0OOGJa5pFmA5U4JInostURdEXf62CIphqbhIGqiFRWxc9lyVkxtFIP73XoT/SZdKvpk5CExIBYO03Goh0PfmUOZTCva/sV8llx2ldP3X520LnbpdzY+82a6MxjDMleTPvBQDFyoqGxFgccdrbCmsW7GTIKXTEr8adANv2HUzOfQSnKbNx3ZvZs+50xk9EszEu2adixcRPDiSU5zttcj771QUK46Az+1MfZsu3LbThulSX7dXWpH2Ur6IlNwlp2J5nJRFfiApVf/ivBOMUTnkQdwxMfz6HnaKRCLZU/LjsWI1tbSaf8RHDjjGYbcMTXhilz/4iy+PH1iJnrAQyp3Ncn1PQh7bSX/25J9m7pzdtF4kVRz9KhhmZPsimlZTnoE8HEm619cUcHoWTP2sI3DO3cSuv4mNr8/F03THKfMxCIRSrp2YdiD99PliMPQktyOy3/zWza98d9M0nGW+ULBEQ68Vibpa8c+NSzzCBWA7wF+m84Tg6hp2mKHk+WZoyEu1ToxEw4jFqP/VZfT/4rL97A/a9esZfM777H140/Ysegr6tdvEKLU5doDLGIxYtEosXAEV2kpnfYfRsWhh7DPccfS5fA923htec/PyrvuZfeqb520M0zsQeBAXyi4VOUhv+4+Bdn3Kg2NNixzoS2A5bl6MPAJ6Wt7rzQs8x+KTdHa21DkbBrMLobedxc9/ufEJjmrfsNGtn36ObtMk9p1PxDZvRtXcTEl++xDh0ED6Tx6FJ0OaPoujPqqKpZeeqVIQsg8ie5hXyg4WYV7EdmWHyHvwWiBlhiW6W0Jg+Yagi8D0t1hGwM6GZa5S1FUH41oNp5x2Ua0tpaOHg/dx42hx0nj6DDEeTZItKaGTW++zcbX57DFH0ArKkqcvxnQO75QcIwD0XwU9vpl3WRYZotmV3MAH4S9ktFZhmWe7qCt8IPAtdl0RMQiEUp79qD3xDPpcfJJlPbuJUSz5hJcqO0p5mPRKNH6eqrmzmP9f15i64cfQXHxnuI8M9qKCNBsdBAW3I694oHOhmVWKwGctIvmkf7Oonpgf+nqVKKAx/so9q6GUdOCG8LEImFKKipo170bxRUVFHXokAA5VldPuLqa+i1V1G8U5rlWXJwNbk2mWmC0LxRc7oB77V5ceYthmWnvPtRaOAdOBV6x8aLlhmUOVwQXROnkRzhoUFrgVA+M8YWCAdWb0fy6uwviAtB0qZ8bEeWnadtKupqzwQzLfBVx3Wo6GubX3XcqOj+QV7j+xOYmaisUA8Y6AVfSXBvggrh+x1bP0HQHzlibE7vOr7t1B7dVhxFNUOfuBeDuAo7zhYJzVcBNuiTrZuylRtUZljnFrs7jSnMmrMHeFailwGd+3V2iomxJTo4h7g/6QxIXtDVaA4xSBTcuLWW8126j1zEq0tKVxlUGwtltJ4GuBzJxwElymC8UnApMQly21ZZogTQpV8Q3rV3Olf91RQR67Kjvc4GPVKwWu/cHn0z6tJ443WlY5q0OtOq4nTwAER0Z2gbAvRp4JH4lvKIpFOfeD7Cfd97XsEylqhGXzYnMpoWQVKr67tfdv1Dl5PjO94WC3/lCwWHAnaSvfGwt+hzQfaHg33GQ25wE7rMK4F5kWOY6VemoKUzKzoXEyXSUYZkfO+Vk+XNP4M/AOQUC7E5pPn7gCwUbnGjKSeDejb07gAG+QDQhjapeIagpTsrunYZxOt6wzPczvRE84PGOlErIcaSPdOWCQsBTvlDwrtRN6BDcW5OUSjubqp9hmY6kmS2/XFKn0wDwiML47/l195EZgosvFPxKcs4A6eXJl6b9GcLhf2AWwf2DArhh4ATDMrc5vXjbUajEr7vfl6aNXZpoWOYLmXJyCvCnAKchguLDyU5TsQ1So/UDT/tCwbWZgJqih2jA34ErFB7/vWGZt2eybprDXdgZWIK9bIM43W1Y5s1ZENfJZzSI0FoJcCiic/2x2C933YRotPo28DqicL1BphllBGwTa/chasUDDxmWmXFARstgwgMREadKhceeBCYZllmXTW5uZiO0R1xs0ZnGVlEReaZt9YWCOW3IlcQMHrl5VGKZAUQuVkOma6RlOHk3sFBR8dkIHGhY5g+5Brm1KGl9JqJ+nd8CwzIPztZcHAU/k5QuE5GCo3I1Ww/A8uvu3yRfJbO3ACupu193P+0A3KXACXEvVzZIy9JOHY0I/aneNbcc0Th8c9KmabMcK38+GnG7qGpW/DLDMkdke25aFsXRQdLb1U1xiLA0vW41LHN7WwI56dqb+Ca/C/VuCEjfwqkotm7OmYhuSlwjnO4Hod5+uBjh093i190XkJTsV6iiO8X06SjF8QKH4L5mWKYB7JBx+MLi4Ca+fCUiqnS8wyFWIyoA7jQsc2ehAZskig9A3Op2agbetZuBexzcaJM/Dm6CqgzLPAF7NcdNUX+5cNV+3f1Xv+7ur1LwliNOjVNHv+4e5dfdAcQ1u2c7BLcOuMCwzLvJsVdOy/ECnYaDGuEUikinylvAY8kJfrk6r1PH9evuYxEJgocDAzMcfhkw3rDMUD42qZYHLigH5gGjsjTk98BjcuNsBLbLPiNpgbKzMfy6uxOifeNgxLW4vyQ7btAI4v7li/MphXLNwXElrAQ4C5ie5VdsRbgX1yNCal9Kbv/GTkK+X3d3R9T+eBGuzpGIbvXdsZf8ZpdWAhMMy1yUS8nTKhycAnQv4AVEvnU+3h2RG6BGmmPtpa2+T54YqBp4PO5Tbg0TMG/dq5NARorr5wEPey89A9yommLTZgFuxtSYBPwaxYu0CpjCiJqiaw3L/KoQJtTq/eelCXQI8ARqEZdCo5mIstvVhmVGC8UjVwgAJ3P0GOBKhH+6axsAdRXCPXuvYZnfFeIEC+4OOb/u1qTzYBxwDzCoANftbeB6IGRYZn1rKVBtEuAmAB+MSM3xAaOB3q0wDRPha34LeDFugrWFwEjbuAWykbNdiMukzgbOIHeViVFEu4kZiIT/3YiU1VhbAbbNAdzcwspGYUMQLsR+iHBlJSJVpwt7puyATNmRNup2RK73BkR90Sopdn9gL6H/Bd/LqOW8x05aAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listContainer\":\"AvailableFieldList_listContainer__2KZDy\",\"draggableContainer\":\"AvailableFieldList_draggableContainer__2hWW0\",\"dragForeignContainer\":\"AvailableFieldList_dragForeignContainer__oOWRp\",\"isDraggingOver\":\"AvailableFieldList_isDraggingOver__2TP5O\",\"field\":\"AvailableFieldList_field__Kmr7D\",\"dragForeign\":\"AvailableFieldList_dragForeign__pv234\",\"groupBy\":\"AvailableFieldList_groupBy__2BCem\",\"fieldName\":\"AvailableFieldList_fieldName__1-ueu\"};","import React from 'react';\nimport ToolTip from 'react-portal-tooltip'\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons\";\n\nimport logo from './crlogo.png';\nimport style from './Header.module.css';\n\nclass Header extends React.Component {\n\n\tstate ={\n\t\tshowInfo: false\n\t}\n\n\thideTooltip = () => {\n\t\tthis.setState({\n\t\t\tshowInfo: false\n\t\t})\n\t}\n\n\tshowTooltip = () =>  {\n\t\tthis.setState({\n\t\t\tshowInfo: true\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={ style.header }>\n\t\t\t  <a href=\"http://www.cyberreboot.org/\" target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t  \t<img src={ logo } className={ style.logo } alt='Cyber Reboot' />\n\t\t\t  </a>\n\t\t\t  <span className={ style.appName }>CRviz</span>\n\t\t\t  <span className={ style.infoIcon }>\n\t\t\t\t<label id=\"showInfo\" onMouseEnter={this.showTooltip} onMouseLeave={this.hideTooltip}>\n\t\t\t      <FontAwesomeIcon icon={faInfoCircle} />\n\t\t\t    </label>\n\t\t\t    <ToolTip active={this.state.showInfo} position=\"bottom\" parent=\"#showInfo\" tooltipTimeout={250}>\n\t\t\t      <div className={ style.infoPopup }>\n\t\t\t        About CRviz:<br/>\n\t\t\t        Home: <a href=\"https://www.cyberreboot.org/projects/crviz/\">https://www.cyberreboot.org/projects/crviz/</a><br/>\n\t\t\t        Version: { process.env.REACT_APP_VERSION } <br/>\n\t\t\t        Copyright © 2017-2018 IQT Labs LLC.\n\t\t\t      </div>\n\t\t\t    </ToolTip>\n\t    \t  </span>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Header;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Draggable } from \"react-beautiful-dnd\";\n\nimport classNames from \"classnames\";\n\nfunction SelectedField({\n  style,\n  displayName,\n  count = 0,\n  index,\n  draggableId,\n  dragIndex,\n  animated\n}) {\n  return (\n    <Draggable draggableId={draggableId} type=\"Field\" index={index}>\n      {\n        (provided, snapshot) => {\n        return (\n          <Field\n            style={style}\n            displayName={displayName + \" (\" + count + \")\"}\n            dragIndex={dragIndex}\n            provided={provided}\n            animated={animated}\n          />\n        );\n      }}\n    </Draggable>\n  );\n}\n\nfunction Field({ style, displayName, dragIndex, animated, provided }) {\n  return (\n    <div>\n      <div\n        className={style.draggable}\n        ref={provided.innerRef}\n        {...provided.draggableProps}\n        {...provided.dragHandleProps}\n      >\n        <div className={style.field}>\n          <span\n            className={classNames({\n              [style.groupBy]: true,\n              [style.animated]: animated\n            })}\n          >\n            {dragIndex === 0 ? \"Group by\" : \"Then by\"}\n          </span>\n          <span className={style.fieldName}>{displayName}</span>\n        </div>\n      </div>\n\n      {provided.placeholder}\n    </div>\n  );\n}\n\nSelectedField.propTypes = {\n  style: PropTypes.shape({\n    draggable: PropTypes.string.isRequired,\n    field: PropTypes.string.isRequired,\n    groupBy: PropTypes.string.isRequired,\n    fieldName: PropTypes.string.isRequired\n  }),\n  displayName: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  draggableId: PropTypes.string.isRequired,\n  dragIndex: PropTypes.number.isRequired,\n  animated: PropTypes.bool.isRequired\n};\n\nexport default SelectedField;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { findIndex, eqBy, differenceWith, isEmpty, isNil, path } from \"ramda\";\n\nimport { Droppable } from \"react-beautiful-dnd\";\n\nimport SelectedField from \"./SelectedField\";\n\nclass SelectedFieldList extends React.Component {\n  state = {\n    lastFields: [],\n    toAnimate: null\n  };\n\n  componentDidMount() {\n    this.setState({\n      lastFields: this.props.fields\n    });\n  }\n\n  static getDerivedStateFromProps(props, state){\n    const { getFieldId } = props;\n\n    // Find newly inserted item, if any\n    let toAnimate = differenceWith(\n      eqBy(getFieldId),\n      props.fields,\n      state.lastFields\n    )[0];\n\n    if (toAnimate) {\n      // Only animate item that are not inserted at the bottom using AffordanceDroppable\n      const newIndex = findIndex(eqBy(getFieldId, toAnimate), props.fields);\n      toAnimate = newIndex < state.lastFields.length ? toAnimate : null;\n    }\n\n    return {\n      lastFields: props.fields,\n      toAnimate: toAnimate\n    };\n  }\n\n  render() {\n    const { style, fields, values, getFieldId, droppableId, dragState } = this.props;\n\n    const draggingOver = isDraggingOver(droppableId, dragState);\n    return (\n      <div className={style.listContainer}>\n        <Droppable droppableId={droppableId} type=\"Field\">\n          {\n            (provided, snapshot) => {\n            return (\n              <div\n                ref={provided.innerRef}\n                {...provided.droppableProps}\n                className={style.droppable}\n              >\n                <List\n                  style={style}\n                  fields={fields}\n                  values={values}\n                  getFieldId={getFieldId}\n                  droppableId={droppableId}\n                  dragState={dragState}\n                  toAnimate={this.state.toAnimate}\n                />\n\n                {draggingOver &&\n                  dragState.destination.index !== fields.length &&\n                  provided.placeholder}\n              </div>\n            );\n          }}\n        </Droppable>\n      </div>\n    );\n  }\n}\n\nfunction List({\n  fields,\n  values,\n  getFieldId,\n  style,\n  droppableId,\n  dragState,\n  toAnimate\n}) {\n  if (isEmpty(fields)) {\n    return null;\n  }\n  return fields.map((field, index) => {\n    const id = getFieldId(field);\n    const animated = toAnimate && getFieldId(field) === getFieldId(toAnimate);\n    const count = values[id].length\n    return (\n      <SelectedField\n        style={style}\n        draggableId={id}\n        key={id}\n        displayName={field.displayName}\n        count={count}\n        index={index}\n        dragIndex={dragIndex(droppableId, dragState, index)}\n        animated={animated || false}\n      />\n    );\n  });\n}\n\nconst isDraggingOver = (droppableId, dragState) => {\n  return (\n    !isNil(dragState) &&\n    path([\"destination\", \"droppableId\"], dragState) === droppableId\n  );\n};\n\n/**\n * Calculate the potential indices during drag based on the current dragState.\n *\n * This is used to update the groupBy label on the fly.\n */\nconst dragIndex = (droppableId, dragState, index) => {\n  if (!isDraggingOver(droppableId, dragState)) {\n    return index;\n  }\n\n  const { source, destination } = dragState;\n\n  const from = source.index;\n  const to = destination.index;\n\n  // When inserting, bump down everything below the new index\n  if (source.droppableId !== destination.droppableId) {\n    return index >= to ? index + 1 : index;\n  }\n\n  // For an item that is being dragged, the new index is the destination index.\n  if (index === from) {\n    return to;\n  }\n  // Items not between the source and destination indices are not affected\n  if (index < Math.min(from, to) || index > Math.max(from, to)) {\n    return index;\n  }\n\n  if (from < to) {\n    // If moving down, bump up everything in between\n    return index - 1;\n  } else {\n    // Otherwise, bump down everything in between\n    return index + 1;\n  }\n};\n\nSelectedFieldList.defaultProps = {\n  fields: []\n};\n\nSelectedFieldList.propTypes = {\n  fields: PropTypes.array,\n  droppableId: PropTypes.string.isRequired,\n  getFieldId: PropTypes.func.isRequired,\n\n  style: PropTypes.shape({\n    listContainer: PropTypes.string.isRequired,\n    draggable: PropTypes.string.isRequired,\n    field: PropTypes.string.isRequired,\n    groupBy: PropTypes.string.isRequired\n  })\n};\n\nexport default SelectedFieldList;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Draggable } from \"react-beautiful-dnd\";\n\nfunction AvailableField({ style, displayName, index, draggableId }) {\n  return (\n    <Draggable draggableId={draggableId} type=\"Field\" index={index}>\n      {(provided, snapshot) => {\n        return (\n          <span className={style.draggableContainer}>\n            <span\n              className={style.field}\n              ref={provided.innerRef}\n              {...provided.draggableProps}\n              {...provided.dragHandleProps}\n              style={{\n                ...provided.draggableProps.style,\n                // Disable animation of items moving out of the way when\n                // dragging. It implies the list is sortable, and it doesn't\n                // work well with multiline list anyway.\n                transform: snapshot.isDragging\n                  ? provided.draggableProps.style.transform\n                  : \"none\"\n              }}\n            >\n              {displayName}\n            </span>\n          </span>\n        );\n      }}\n    </Draggable>\n  );\n}\n\nconst StyleProps = PropTypes.shape({\n  draggableContainer: PropTypes.string.isRequired,\n  field: PropTypes.string.isRequired,\n});\n\nAvailableField.propTypes = {\n  style: StyleProps.isRequired,\n  displayName: PropTypes.string.isRequired,\n  index: PropTypes.number.isRequired,\n  draggableId: PropTypes.string.isRequired\n};\n\nexport default AvailableField;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport classNames from \"classnames\";\n\nimport { isEmpty, contains, map, sortBy, curry } from \"ramda\";\n\nimport { Droppable } from \"react-beautiful-dnd\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrashAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nimport AvailableField from \"./AvailableField\";\n\nfunction AvailableFieldList({\n  style,\n  fields,\n  values,\n  getFieldId,\n  droppableId,\n  dragState\n}) {\n  return (\n    <Droppable droppableId={droppableId} type=\"Field\">\n      {(provided, snapshot) => {\n        const dragForeign = isDraggingForeign(dragState, fields, getFieldId);\n\n        return (\n          <div\n            className={classNames(style.listContainer, {\n              [style.dragForeign]: dragForeign,\n              [style.isDraggingOver]: snapshot.isDraggingOver\n            })}\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n          >\n            {!isEmpty(fields) &&\n              sortBy(getCount(getFieldId, values), fields).map((field, index) => {\n                const id = getFieldId(field);\n                const count = values[id].length || 0;\n                return (\n                  <AvailableField\n                    style={style}\n                    key={id}\n                    draggableId={id}\n                    displayName={`${field.displayName} (${count})`}\n                    index={index}\n                    withPlaceholder={false}\n                  />\n                );\n              })}\n\n            {dragForeign && (\n              <div className={style.dragForeignContainer}>\n                <span>\n                  <FontAwesomeIcon icon={faTrashAlt} />\n                </span>\n              </div>\n            )}\n          </div>\n        );\n      }}\n    </Droppable>\n  );\n}\n\nconst getCount = curry((getFieldId, values, field) => {\n  return values[getFieldId(field)].length;\n});\n\nconst isDraggingForeign = (dragState, fields, getFieldId) => {\n  return (\n    dragState &&\n    dragState.draggableId &&\n    !contains(dragState.draggableId, map(getFieldId, fields))\n  );\n};\n\nAvailableFieldList.defaultProps = {\n  fields: []\n};\n\nconst StyleProps = PropTypes.shape({\n  listContainer: PropTypes.string.isRequired,\n  field: PropTypes.string.isRequired,\n  fieldName: PropTypes.string.isRequired\n});\n\nAvailableFieldList.propTypes = {\n  style: StyleProps.isRequired,\n  fields: PropTypes.array,\n  values: PropTypes.object,\n  getFieldId: PropTypes.func.isRequired,\n  droppableId: PropTypes.string.isRequired\n};\n\nexport default AvailableFieldList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport classNames from \"classnames\";\nimport { Droppable } from \"react-beautiful-dnd\";\n\n/**\n * Droppable component to use as a dummy drop target next to SelectedFieldList.\n * This droppable doesn't contain any draggable.\n *\n * Note: this cannot be used nested inside SelectedFieldList, because they need\n * to accept the same type, and react-beautiful-dnd doesn't allow that.\n */\nfunction DropTarget({ style, droppableId, isDropDisabled, fields }) {\n  return (\n    <div\n      className={classNames({\n        [style.listContainer]: true,\n        [style.isDropDisabled]: isDropDisabled\n        })}>\n      <div className={style.draggable}>\n        <div className={style.field}>\n          <span className={style.groupBy}>\n            { fields.length === 0 ? 'Group by' : 'Then by' }\n          </span>\n\n          <Droppable\n            isDropDisabled={ isDropDisabled }\n            droppableId={droppableId}\n            type=\"Field\">\n\n            {(provided, snapshot) => {\n              return (\n                <span\n                  ref={provided.innerRef}\n                  {...provided.droppableProps}\n                  className={\n                    classNames({\n                      [style.dropTarget]: true,\n                      [style.isDraggingOver]: snapshot.isDraggingOver\n                    })}\n                >\n                    Drop attribute here\n                </span>\n              )\n            }}\n          </Droppable>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nDropTarget.propTypes = {\n  style: PropTypes.shape({\n    isDropDisabled: PropTypes.string.isRequired,\n    dropTarget: PropTypes.string.isRequired,\n    isDraggingOver: PropTypes.string.isRequired,\n\n    // The classes below should be identical to the styling of SelectedFieldList\n    // to make both layout the same.\n    listContainer: PropTypes.string.isRequired,\n    draggable: PropTypes.string.isRequired,\n    field: PropTypes.string.isRequired,\n    groupBy: PropTypes.string.isRequired,\n  }),\n\n  droppableId: PropTypes.string.isRequired,\n  isDropDisabled: PropTypes.bool.isRequired,\n  fields: PropTypes.array.isRequired\n}\n\n\nexport default DropTarget;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport { DragDropContext} from 'react-beautiful-dnd';\n\nimport {\n  compose,\n  differenceWith,\n  eqBy,\n  equals,\n  find,\n  findIndex,\n  identity,\n  insert,\n  isEmpty,\n  isNil,\n  path,\n  remove\n} from \"ramda\";\n\nimport { selectMergedConfiguration, selectMergedValues, getFieldId } from \"domain/dataset\";\nimport { setHierarchyConfig, selectControls, showNodes } from \"domain/controls\";\n\nimport SelectedFieldList from './SelectedFieldList';\nimport AvailableFieldList from './AvailableFieldList';\nimport DropTarget from './DropTarget';\n\nimport availableFieldListStyle from './AvailableFieldList.module.css';\nimport selectedFieldListStyle from './SelectedFieldList.module.css';\n\nconst SELECTED_FIELD_LIST_ID = 'SelectedFieldList';\nconst AVAILABLE_FIELD_LIST_ID = 'AvailableFieldList';\nconst DROP_TARGET_ID = 'DropTarget';\n\nclass HierarchySelector extends React.Component {\n\n  state = {\n    dragState: null\n  }\n\n  onDragStart = (dragStart) => {\n    this.setState({\n      dragState: dragStart\n    });\n  }\n\n  onDragUpdate = (dragUpdate) => {\n    this.setState({\n      dragState: dragUpdate\n    })\n  }\n\n  onDragEnd = (dropResult) => {\n    const { draggableId, destination } = dropResult;\n    this.setState({ dragState: null })\n\n    if (destination === null) {\n      return;\n    } else if (destination.droppableId === SELECTED_FIELD_LIST_ID) {\n      this.updateHierarchy(draggableId, destination.index)\n    } else if (destination.droppableId === (DROP_TARGET_ID)) {\n      this.updateHierarchy(draggableId, this.props.controls.hierarchyConfig.length);\n    } else {\n      this.removeField(draggableId);\n    }\n  }\n\n  updateHierarchy = (fieldId, newIndex) => {\n    const { fields } = this.props.configuration;\n    const { hierarchyConfig } = this.props.controls;\n\n    const index = findFieldIndex(hierarchyConfig, fieldId);\n    if (index === newIndex) { return; }\n\n    const hasId = (id) => (field) => getFieldId(field) === id;\n    const field = find(hasId(fieldId), fields)\n\n    const removeOld = isNil(index) ? identity : remove(index, 1);\n    const addNew = insert(newIndex, field);\n    const updatedHierarchy = compose(addNew, removeOld)(hierarchyConfig)\n\n    this.props.setHierarchyConfig(updatedHierarchy)\n  }\n\n  removeField = (fieldId) => {\n    const { hierarchyConfig } = this.props.controls;\n    const { setHierarchyConfig } = this.props;\n    const index = findFieldIndex(hierarchyConfig, fieldId);\n\n    if (index !== null) {\n      setHierarchyConfig(remove(index, 1, hierarchyConfig ))\n    }\n\n    if(this.props.controls.hierarchyConfig.length === 0 ){\n      this.props.showNodes(true);\n    }\n  }\n\n  render() {\n    if (this.props.configuration === null) {\n      return null;\n    }\n\n    const hierarchyConfig = this.props.controls.hierarchyConfig;\n\n    if (isEmpty(this.props.configuration.fields)) {\n      return null;\n    }\n\n    const availableFields = differenceWith(\n      eqBy(getFieldId),\n      this.props.configuration.fields.filter((f) => f.groupable),\n      hierarchyConfig\n    );\n\n    const values = this.props.values;\n\n    const dragState = this.state.dragState;\n\n    return (\n      <div>\n        <DragDropContext\n          onDragStart={ this.onDragStart }\n          onDragUpdate={ this.onDragUpdate }\n          onDragEnd={ this.onDragEnd }>\n\n          <div style={{ marginBottom: '2rem' }}>\n            <SelectedFieldList\n              style={ selectedFieldListStyle }\n              fields={ hierarchyConfig }\n              values={ values }\n              droppableId={ SELECTED_FIELD_LIST_ID }\n              getFieldId={ getFieldId }\n              dragState={ dragState }\n            />\n\n          <DropTarget\n            style={ selectedFieldListStyle }\n            isDropDisabled={ path(['source', 'droppableId'], dragState) === SELECTED_FIELD_LIST_ID }\n            droppableId= { DROP_TARGET_ID }\n            fields={ this.props.controls.hierarchyConfig }\n          />\n        </div>\n\n          <AvailableFieldList\n            style={ availableFieldListStyle }\n            fields={ availableFields }\n            values={ values }\n            droppableId={ AVAILABLE_FIELD_LIST_ID }\n            getFieldId={ getFieldId }\n            dragState={ this.state.dragState }\n          />\n\n        </DragDropContext>\n      </div>\n    );\n  }\n}\n\nHierarchySelector.propTypes = {\n  configuration: PropTypes.shape({\n    fields: PropTypes.array.isRequired\n  }),\n  controls: PropTypes.shape({\n    hierarchyConfig: PropTypes.array.isRequired\n  }),\n  showNodes: PropTypes.func.isRequired\n};\n\nconst findFieldIndex = (list, fieldId) => {\n  const matchId = compose(equals(fieldId), getFieldId)\n  const index = findIndex(matchId, list)\n  return index === -1 ? null : index;\n}\n\nconst mapStateToProps = (state) => ({\n  configuration: selectMergedConfiguration(state),\n  values: selectMergedValues(state),\n  controls: selectControls(state)\n});\n\nconst mapDispatchToProps = {\n  setHierarchyConfig,\n  showNodes\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HierarchySelector);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  sortBy,\n  curry,\n  compose,\n  join,\n  split,\n  find,\n  propEq,\n  prop,\n  isNil\n} from \"ramda\";\n\nfunction FieldSelect({\n  fields,\n  values,\n  getFieldId,\n  value,\n  onChange,\n  className,\n  name\n}) {\n\n  return (\n    <div className={className}>\n      <label className=\"select\">\n        <select\n          \n          name={name}\n          onChange={(evt) => onChange(stringToField(fields, evt.target.value))}\n          value={isNil(value) ? \"\" : fieldToString(value)}\n        >\n          <option value=\"\">&mdash;None&mdash;</option>\n          {sortBy(getCount(getFieldId, values), fields).map((field) => {\n            const key = getFieldId(field);\n            return (\n              <option key={key} value={key}>\n                {field.displayName} ({values[getFieldId(field)].length})\n              </option>\n            );\n          })}\n        </select>\n      </label>\n    </div>\n  );\n}\n\nconst getCount = curry((getFieldId, values, field) => {\n  return values[getFieldId(field)].length;\n});\n\nconst FieldShape = PropTypes.shape({\n  path: PropTypes.array.isRequired,\n  displayName: PropTypes.string.isRequired\n});\n\nFieldSelect.propTypes = {\n  fields: PropTypes.arrayOf(FieldShape).isRequired,\n  value: FieldShape,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  name: PropTypes.string\n};\n\nconst fieldToString = compose(join(\".\"), prop(\"path\"));\n\nconst stringToField = (fields, string) => {\n  const path = split(\".\", string);\n  return find(propEq(\"path\", path), fields);\n};\n\nexport default FieldSelect;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nimport {\n  showNodes,\n  useDarkTheme,\n  colorBy,\n  selectControls\n} from \"domain/controls\";\nimport { selectMergedConfiguration, selectMergedValues, getFieldId } from \"domain/dataset\";\n\nimport FieldSelect from \"./FieldSelect\";\n\nimport style from \"./MiscControls.module.css\";\n\nfunction MiscControls({\n  controls,\n  configuration,\n  values,\n  showNodes,\n  colorBy,\n  useDarkTheme\n}) {\n  const fields = configuration.fields.filter((f) => f.groupable);\n  return (\n    <div className={style.container}>\n      <div className={`${style.checkboxContainer} input-group`}>\n        <div className={ style.switch }>\n          <input\n            type=\"checkbox\"\n            id=\"show-node-check\"\n            checked={controls.shouldShowNodes}\n            onChange={(evt) => showNodes(evt.target.checked)}\n          />\n          <label htmlFor=\"show-node-check\" className={ style.switchLabel }>\n          </label>\n        </div>\n        <label >Show nodes</label>\n      </div>\n\n      <div className={`${style.checkboxContainer} input-group`}>\n        <div className={ style.switch }>\n          <input\n            type=\"checkbox\"\n            id=\"dark-theme-check\"\n            checked={controls.darkTheme}\n            onChange={(evt) => useDarkTheme(evt.target.checked)}\n          />\n          <label htmlFor=\"dark-theme-check\" className={ style.switchLabel }> \n          </label>\n        </div>\n        <label>Use dark theme</label>\n      </div>\n\n      <div className={`input-group ${style.colorBy}`}>\n        <label htmlFor=\"colorBy\">Color by</label>\n        <div className={style.fieldSelect}>\n          <FieldSelect\n            name=\"colorBy\"\n            className={style.selector}\n            onChange={colorBy}\n            fields={fields}\n            values={values}\n            getFieldId={getFieldId}\n            value={controls.colorBy}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    controls: selectControls(state),\n    configuration: selectMergedConfiguration(state),\n    values: selectMergedValues(state)\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    showNodes: (shouldShowNodes) => dispatch(showNodes(shouldShowNodes)),\n    useDarkTheme: (darkTheme) => dispatch(useDarkTheme(darkTheme)),\n    colorBy: (field) => dispatch(colorBy(field))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MiscControls);\n","import { is } from \"ramda\";\nimport { createAction } from \"redux-actions\";\nimport { ofType } from 'redux-observable';\nimport { of } from \"rxjs\";\nimport { mergeMap, map, tap, catchError } from 'rxjs/operators';\nimport { QueryParseError } from 'lunr';\n\nimport { setError } from \"domain/error\"\nimport { setSearchResults} from \"./index-dataset-epic\";\n\nconst searchDataset = createAction(\"SEARCH_DATASET\");\n\nconst searchDatasetEpic = (action$, store) => {\n  return action$.pipe(\n      ofType(searchDataset.toString())\n      ,mergeMap(({ payload }) => {\n        return of(payload).pipe(\n            tap(performSearch)\n            ,map((payload) =>\n              setSearchResults({\n                queryString: payload.queryString,\n                results: payload.results || []\n              })\n            )\n            ,catchError((error) => {\n              if (is(QueryParseError, error)) {\n                return of(setError(error));\n              } else {\n                /* istanbul ignore next */\n                throw error;\n              }\n            })\n          );\n      })\n    );\n};\n\nconst performSearch = (data) => {\n  data.results = [];\n  var toFind = data.queryString || '';\n  const indices = data.searchIndices;\n  var results = [];\n  if(indices && toFind){\n    for(var hash in indices){\n      const idx = indices[hash];\n      const idxResults = idx.search(toFind.toLowerCase());\n      const temp = new Set([...results, ...idxResults]);\n      results = [...temp];\n    }\n  }\n\n  data.dataset.forEach((el) => { el.isSearchResult = false; });\n  results.forEach((r) => {\n    if(data.dataset[r.ref]){\n      data.dataset[r.ref].isSearchResult = true;\n      data.results.push(data.dataset[r.ref]);\n    }\n  });\n};\n\nexport default searchDatasetEpic;\n\nexport { searchDataset };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSearch,  faTimesCircle} from \"@fortawesome/free-solid-svg-icons\";\n\nimport { selectDataset, selectConfiguration } from \"domain/dataset\";\n\nimport { getSearchIndices, getSearchResults } from \"epics/index-dataset-epic\";\nimport { searchDataset } from \"epics/search-dataset-epic\";\n\nimport style from \"./SearchControls.module.css\";\n\nconst defaultState = {\n  queryString: '',\n  searchIndices: [],\n  hasSearch: false\n}\n\nclass Search extends React.Component {\n\n  state = defaultState\n\n  handleSearch(){\n    this.setState({\n      hasSearch: this.state.queryString !== ''\n    });\n    var data = {\n      dataset: this.props.dataset,\n      configuration: this.props.configuration,\n      searchIndices: this.props.searchIndices,\n      queryString: this.state.queryString,\n      results: this.props.results\n    }\n    this.props.searchDataset(data);\n  }\n\n  clearSearch(){\n    this.setState(defaultState, function() {\n      this.handleSearch();\n    });\n  }\n\n  handleQueryStringChange = (e) =>{\n        this.setState({\n          queryString: e.target.value\n        });\n  }\n\n  handleKeyPress = (e) => {\n    if(e.key === 'Enter'){\n      this.handleSearch();\n    }\n  }\n\n  render() {\n    return (\n      <div className={style.searchContainer}>\n        <span className={ style.search }>\n          <input\n            type=\"search\"\n            id=\"search-string\"\n            placeholder=\"Search\"\n            value={this.state.queryString}\n            onChange={this.handleQueryStringChange}\n            onKeyPress={this.handleKeyPress}\n          />\n\n          <label htmlFor=\"search-string\" className=\"button circular\" onClick={() => this.handleSearch()} title=\"Search\">\n            <FontAwesomeIcon icon={faSearch} />\n          </label>\n        </span>\n        { this.state.hasSearch &&\n          <span>\n            <label id=\"search-results\"> {this.props.results.length} Results found </label>\n            <label htmlFor=\"search-results\" className=\"button circular\" onClick={() => this.clearSearch()}>\n              <FontAwesomeIcon icon={faTimesCircle} />\n              </label>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nSearch.propTypes = {\n  dataset: PropTypes.array,\n  configuration: PropTypes.object,\n  searchIndex: PropTypes.object,\n  queryString: PropTypes.string,\n  results: PropTypes.array,\n  searchDataset: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  const hash = Object.keys(state.dataset.datasets)[0] || \"\"\n  return {\n    dataset: selectDataset(state, hash),\n    configuration: selectConfiguration(state, hash),\n    searchIndices: getSearchIndices(state),\n    queryString: state.search.queryString,\n    results: getSearchResults(state)\n  };\n}\n\nconst mapDispatchToProps = {\n  searchDataset,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Search);\n","import {\n  add,\n  addIndex,\n  aperture,\n  concat,\n  forEach,\n  map,\n  last,\n  prop,\n  reject,\n  reverse,\n  splitEvery,\n  reduce\n} from \"ramda\";\n\nimport { packEnclose } from \"d3-hierarchy\";\n\n/**\n * Pack circles into rows and columns.\n */\nconst packGrid = (circles) => {\n  const rows = toRows(circles);\n  placeRows(rows);\n\n  // Recenter everything over the origin\n  var enclosingCircle = packEnclose(circles);\n  forEach((c) => {\n    c.x -= enclosingCircle.x;\n    c.y -= enclosingCircle.y\n  }, circles);\n};\n\nconst eachWithIndex = addIndex(forEach);\n\n/**\n * Assign x and y coordinates to rows of circles\n */\nconst placeRows = (rows) => {\n  rows = middleOut(map(middleOut, rows));\n\n  const maxRadii = map(maxRadius, rows);\n  const ys = coordinatesForRadii(maxRadii);\n  const xs = map(coordinatesForRadii, map(map(prop('r')), rows));\n\n  return eachWithIndex(\n    (row, i) =>\n      eachWithIndex((node, j) => {\n        node.x = xs[i][j];\n        node.y = ys[i];\n      }, row),\n    rows\n  );\n};\n\nconst maxRadius = (row) => {\n  return Math.max(...row.map((c) => c.r));\n};\n\n// Calculate the coordinates for the given list of radii\n// such that circles of these radii sit on the same line without colliding.\n// The circles are distributed evenly over the origin.\nconst coordinatesForRadii = (radii) => {\n  const diameters = map((r) => r * 2, radii)\n  const size = reduce(add, 0, diameters);\n\n  const first = 0 - size / 2 + radii[0]; // Calculate the first coordinate\n\n  return reduce((coords, [lastRadius, currentRadius]) => {\n    return [...coords, last(coords) + lastRadius + currentRadius];\n  }, [first], aperture(2, radii))\n};\n\n\nconst pickEven = (list) => addIndex(reject)((_, i) => i % 2 === 0, list);\nconst pickOdd = (list) => addIndex(reject)((_, i) => i % 2 !== 0, list);\n\n/**\n/ Re-order items from the middle out, alternating in direction.\n/\n/ Example:\n/ middleOut([1, 2, 3, 4, 5]) //=> [4, 2, 1, 3, 5]\n*/\nconst middleOut = (rows) => {\n  const above = pickEven(rows);\n  const below = pickOdd(rows);\n  return concat(reverse(above), below);\n};\n\nconst toRows = (circles) => {\n  return splitEvery(Math.ceil(Math.sqrt(circles.length)), circles);\n};\n\nexport default packGrid;\n","import { packEnclose } from \"d3-hierarchy\";\nimport packGrid from \"./pack-grid\";\n\n/**\n * An adaptation of the circle packing algorithm to reserve spacing at the\n * bottom of each non-leaf circle for labeling.\n */\nconst packWithLabel = () => {\n  let options = {\n    // Radius funcion\n    // See d3.pack.radius\n    radius: null,\n\n    // Layout size\n    // See d3.pack.size\n    size: [1, 1],\n\n    // Padding constant/function\n    // See d3.pack.padding\n    padding: () => 0,\n\n    // A number in [0, 1) that determine the portion of the circle that is\n    // reserved for label.\n    //\n    // To ensure label display are consistent between siblings, all siblings\n    // circles use the label size of the largest circle.\n    labelRatio: 0.25,\n\n    // But we ensure smaller circle doesn't look like Ben Solo with its high\n    // waisted pant.\n    maxLabelRatio: 0.4,\n\n    // The packing method for packing siblings node.\n    // By default use the packGrid method. Can be set to use D3's packSiblings\n    // method instead.\n    packSiblings: packGrid\n  };\n\n  /**\n   * @param root - A D3 hierarchy object\n   * @return A `pack` object similar to `d3.pack` but with additional options (see above)\n   */\n  const pack = (root) => {\n    root.x = options.size[0] / 2;\n    root.y = options.size[1] / 2;\n    const { radius, size, labelRatio, maxLabelRatio, packSiblings } = options;\n    const padding =\n      typeof options.padding === \"function\" ? options.padding : () => options.padding;\n\n    if (radius) {\n      root\n        .eachBefore(radiusLeaf(radius))\n        .eachAfter(packChildren(packSiblings, labelRatio, maxLabelRatio, padding, 0.5))\n        .eachBefore(translateChild(1));\n    } else {\n      // If radius is not specified, set each leaf node's radius based on its\n      // value, then resize the entire layout to fit options.size\n      root\n        .eachBefore(radiusLeaf((d) => Math.sqrt(d.value)))\n        .eachAfter(packChildren(packSiblings, labelRatio, maxLabelRatio, () => 0, 1))\n        .eachAfter(\n          packChildren(\n            packSiblings,\n            labelRatio,\n            maxLabelRatio,\n            padding,\n            root.r / Math.min(...size)\n          )\n        )\n        .eachBefore(translateChild(Math.min(...size) / (2 * root.r)));\n    }\n    return root;\n  };\n\n  /**\n   * Create an option method for each of the option above.\n   * Calling the method without arguments returns the current value.\n   * Calling the method with argument sets the option.\n   *\n   * Example:\n   * var pack = packWithLabel(root)\n   *              .radius(() => 20)\n   * pack.radius() //=> () => 20.\n   */\n  Object.keys(options).forEach((key) => {\n    pack[key] = (...values) => {\n\n      if (values.length === 0) {\n        return options[key];\n      }\n      options[key] = values[0];\n      return pack;\n    };\n  });\n\n  return pack;\n};\n\nconst radiusLeaf = (radius) => {\n  return (node) => {\n    if (!node.children) {\n      node.r = Math.max(radius(node), 0);\n    }\n  };\n};\n\nconst getLabelSize = (labelRatio) => (node) => {\n  return 2 * node.r * labelRatio / (1 - labelRatio);\n};\n\n/**\n * Pack children of a node, then set the node's radius to enclose all the children\n */\nconst packChildren = (packSiblings, labelRatio, maxLabelRatio, padding, k) => (node) => {\n  if (!node.children) {\n    return;\n  }\n\n  const children = node.children;\n\n  const nonleafChildren = children.filter((child) => child.height > 0);\n\n  // Calculate the label size of the largest non-leaf children\n  // and expand their radii accordingly to make space for label.\n  if (nonleafChildren.length > 0) {\n    const labelSize = Math.max(...nonleafChildren.map(getLabelSize(labelRatio)))\n\n    nonleafChildren.forEach((node) => {\n      node.labelSize = Math.min(labelSize, getLabelSize(maxLabelRatio)(node));\n      node.r += node.labelSize / 2;\n    });\n  }\n\n  const paddingSize = padding(node) * k || 0;\n\n  // Padding is implemented by adding it to the children's radii, pack,\n  // then returning the radii to their original value.\n  if (paddingSize) {\n    children.forEach((child) => (child.r += paddingSize));\n  }\n\n  packSiblings(children);\n  const enclosingRadius = packEnclose(children).r;\n\n  if (paddingSize) {\n    children.forEach((child) => (child.r -= paddingSize));\n  }\n\n  node.r = enclosingRadius + paddingSize;\n};\n\n// Set the the node's children's positions to be inside the node and above the\n// space reserved for labeling.\nconst translateChild = (k) => (node) => {\n  const parent = node.parent;\n  node.r *= k;\n\n  if (node.labelSize) {\n    node.labelSize *= k;\n    node.labelY = node.r - node.labelSize / 2;\n    node.labelWidth = 2 * Math.sqrt(node.r ** 2 - node.labelY ** 2);\n  }\n\n  if (parent) {\n    node.x = parent.x + k * node.x;\n    node.y = parent.y + k * node.y;\n    if (parent.labelSize) {\n      node.y -= parent.labelSize / 2;\n    }\n  }\n};\n\nexport default packWithLabel;\n","import { chain, head, tail, map, reduce, path, isNil } from \"ramda\";\nimport { nest } from \"d3-collection\";\nimport { hierarchy as d3Hierarchy } from \"d3-hierarchy\";\n\n/**\n * Convert an array of nodes into a D3 hierarchy\n *\n * @param [array] data - an array of data\n * @hierarchy [array] - an array of objects in the shape of\n * {\n *   displayName: string,\n *   path: array[string]\n * }\n */\n\nconst toHierarchy = (data, hierarchyConfig) => {\n  const nesting = nestHierarchy(hierarchyConfig).entries(data);\n  const result = entriesToHierarchy(\"root\", null, hierarchyConfig, nesting);\n  return d3Hierarchy(result);\n};\n\n/**\n * Create the D3 nest function that will nest data given the hierarchyConfig.\n */\nconst nestHierarchy = (hierarchyConfig) => {\n  return reduce(\n    (nest, field) => {\n      return nest.key((d) => path(field.path, d));\n    },\n    nest(),\n    hierarchyConfig\n  );\n};\n\nconst countSearchResults = (children) => {\n  if(isNil(children)){\n    return 0;\n  }\n\n  var result = 0;\n\n  for(var c in children){\n    result += (children[c].searchResultCount || 0) + (children[c].isSearchResult || 0) +\n              (\n                !isNil(children[c].values)\n                  ? countSearchResults(children[c].values) : 0\n              );\n  }\n\n  return result;\n};\n\n/**\n * Convert nest entries into the format accepted by d3.hierarchy\n */\nconst entriesToHierarchy = (fieldValue, field, hierarchyConfig, entries) => {\n  if (fieldValue === 'Unknown') {\n    return {\n      fieldValue,\n      field,\n      children: chain(getLeaves, entries),\n      searchResultCount: countSearchResults(entries)\n    }\n  }\n\n  return {\n    fieldValue,\n    field,\n    children: map((entry) => {\n      if (entry.values) {\n        return entriesToHierarchy(\n          entry.key,\n          head(hierarchyConfig),\n          tail(hierarchyConfig),\n          entry.values\n        );\n      } else {\n        return entry;\n      }\n    }, entries),\n    searchResultCount: countSearchResults(entries)\n  };\n};\n\nconst getLeaves = (entry) => {\n  if (entry.values) {\n    return chain(getLeaves, entry.values)\n  } else {\n    return [entry]\n  }\n}\n\nexport default toHierarchy;\n","\n/**\n * Return a string that can be used to check if two data are the same.\n*/\nconst datumKey = (datum) => {\n  if (datum.depth === 0) {\n    return 'root';\n  } else if (datum.height > 0) {\n    return [\n      datumKey(datum.parent),\n      datum.data.field.path.join(\".\"),\n      datum.data.fieldValue\n    ].join(\".\");\n  } else {\n    return datum.data.uid;\n  }\n};\n\nexport default datumKey;\n","import { path } from \"d3-path\";\nimport datumKey from \"./datum-key\";\n\nconst appendCircles = ({ nodeRoot, labelRoot, packedData, showNodes, hasSearch }) => {\n  const isInternal = (d) => d.depth > 0 && d.height > 0;\n\n  const data = packedData.descendants();\n\n  const nodes = nodeRoot\n    .selectAll(`g.${className(\"node\")}`)\n    .data(data, datumKey);\n\n  nodes.exit().remove();\n  //console.log(nodes);\n  const nodesEnter = nodes.enter().append(\"g\").classed(className(\"node\"), true);\n  nodesEnter\n    .merge(nodes)\n    .attr('data-key', datumKey)\n    .classed(className(\"rootNode\"), (d) => d.depth === 0)\n    .classed(className(\"groupingNode\"), (d) => d.depth > 0 && d.height > 0)\n    .classed(className(\"containsSearchResult\"), (d) => hasSearch && d.data.searchResultCount > 0 && d.depth > 0 && d.height > 0)\n    .classed(className(\"containsNoSearchResult\"), (d) => hasSearch && d.data.searchResultCount === 0 && d.depth > 0 && d.height > 0)\n    .classed(className(\"searchResult\"), (d) => hasSearch && d.data.isSearchResult && d.depth > 0 && d.height === 0)\n    .classed(className(\"searchExcluded\"), (d) => hasSearch && !d.data.isSearchResult && d.depth > 0 && d.height === 0)\n    .classed(className(\"leafNode\"), (d) => d.height === 0)\n    .attr(\"transform\", (d) => `translate(${[d.x, d.y].join(\",\")})`)\n    .attr(\"display\", (d) => !showNodes && d.height === 0 ? 'none' : null)\n    .order();\n\n  const circles = nodes.select(\"circle\").merge(nodesEnter.append(\"circle\"));\n\n  circles.attr(\"r\", (d) => d.r);\n\n  const labelShapes = nodes.select(\"path\").merge(nodesEnter.append(\"path\"));\n\n  labelShapes\n    .filter((d) => d.labelSize)\n    .attr(\"class\", className(\"labelShape\"))\n    .attr(\"d\", getLabelShape);\n\n  const labels = labelRoot\n    .selectAll(`text.${className(\"label\")}`)\n    .data(packedData.descendants().filter(isInternal));\n\n  labels.exit().remove();\n\n  const labelsEnter = labels\n    .enter()\n    .append(\"text\")\n    .classed(className(\"label\"), true);\n\n  const countLabels = labelRoot\n    .selectAll(`text.${className(\"countLabel\")}`)\n    .data(packedData.descendants().filter((d) => d.height === 1))\n\n  countLabels.exit().remove();\n\n  const countLabelsEnter = countLabels\n    .enter()\n    .append(\"text\")\n    .classed(className(\"countLabel\"), true);\n\n  countLabels\n    .merge(countLabelsEnter).text((d) => d.value )\n    .style(\"display\", showNodes ? 'none' : 'block')\n\n  return [\n    nodes.merge(nodesEnter),\n    labels.merge(labelsEnter),\n    countLabels.merge(countLabelsEnter)\n  ];\n};\n\n/**\n * Calculate the d attribute of a path element representing the shape of the\n * label area (the partial circles at the bottom of the grouping nodes)\n */\nconst getLabelShape = (d) => {\n  const top = d.r - d.labelSize;\n  const radius = d.r;\n\n  const startAngle = Math.PI / 2 + Math.acos(top / radius);\n  const endAngle = Math.PI / 2 - Math.acos(top / radius);\n\n  const shape = path();\n  shape.arc(0, 0, radius, startAngle, endAngle, true);\n  shape.closePath();\n  return shape.toString();\n\n}\n\nconst className = (name) => `viz-${name}`;\n\nexport default appendCircles;\n","import { memoizeWith } from \"ramda\";\n\nconst context = document.createElement(\"canvas\").getContext(\"2d\");\n\nconst memoizeKey = (font, text) => [font, text].join(\" \");\n\n/**\n * Measure width and height of text using canvas.\n * return an array [width, height]\n */\nconst measureText = memoizeWith(memoizeKey, (font, text) => {\n  context.font = font;\n\n  return [\n    Math.floor(context.measureText(text).width),\n    // Chrome doesn't support advanced text metrics yet, so\n    // we'll use the width of the letter M as an approximation of text height.\n    // https://youtu.be/Ps6GBLlSGLs?t=22m51s\n    Math.floor(context.measureText(\"M\").width)\n  ];\n});\n\nconst fitText = (font, text, width) => {\n  var original = text;\n  // var fontSpec = getFontSpec(textElement);\n  // var fontSpec = '12px sans-serif';\n  var textLength = measureText(font, text)[0];\n\n  while (textLength >= width && text.length > 0) {\n    text = text.slice(0, text.length - 1);\n    textLength = measureText(font, text + \"…\")[0];\n  }\n\n  return text + (text.length < original.length ? String.fromCharCode(8230) : \"\");\n}\n\n\n\n/**\n * Get CSS font from DOM node\n * Return the entire string, e.g. \"12px sans-serif\"\n */\nconst getFont = (domElement) => {\n  const style = getComputedStyle(domElement);\n  const family = style.getPropertyValue('font-family')\n  const size = style.getPropertyValue('font-size')\n\n  return  size + \" \" + family;\n}\n\nexport { measureText, fitText, getFont };\n","import { zoom, zoomTransform } from \"d3-zoom\";\nimport { event as d3Event } from \"d3-selection\";\nimport { zoomIdentity } from \"d3-zoom\";\nimport { measureText, fitText, getFont } from \"./text-utils\";\n\nconst setupZoom = ({\n  zoomRoot,\n  transformRoot,\n  nodes,\n  labels,\n  countLabels,\n  showNodes,\n  width,\n  height,\n  packedData\n}) => {\n\n  const state = {\n    zoomTo: null,\n    zoomToTransform: null,\n    // Find the current zoom transform if any\n    transform: zoomTransform(zoomRoot.node())\n  };\n\n  const zoomBehavior = zoom();\n\n  zoomBehavior.on(\"zoom\", () => {\n    const event = d3Event;\n    state.transform = event.transform;\n    zoomToTransform(event.transform)\n  });\n\n  zoomRoot.call(zoomBehavior);\n\n  // Amount of space to leave around a node when zoomed into that node\n  // (as a fraction of the node diameter)\n  const viewPadding = 0.25;\n\n  const { r: rootR, x: rootX, y: rootY } = packedData;\n\n  const scaleExtent = [\n    Math.min(width, height) / (rootR * 2),\n    Math.min(width, height) / (packedData.leaves()[0].r * 2 * (1 + viewPadding))\n  ];\n\n  const translateExtent = [\n    [\n      rootX - width / 2 / scaleExtent[0] * 2,\n      rootY - height / 2 / scaleExtent[0] * 2\n    ],\n    [\n      rootX + width / 2 / scaleExtent[0] * 2,\n      rootY + height / 2 / scaleExtent[0] * 2\n    ]\n  ];\n\n  zoomBehavior.scaleExtent(scaleExtent).translateExtent(translateExtent);\n\n  // Assume everything is hidden by default.\n  //\n  // Note:\n  // This could have been done using inline style.\n  // The odd thing is, when using inline style, apparently each node's style is\n  // recalculated in every frame during zooming regardless of whether or not\n  // the inline style was changed.\n  //\n  // Using a class avoided this issue.\n  nodes.classed('viz-zoomMinutia', true);\n\n  const [labelFont, labelHeight] = getLabelStyle(labels);\n  const [countLabelFont, countLabelHeight] = getLabelStyle(countLabels);\n\n  function zoomToTransform(transform) {\n    transformRoot\n      .style(\"transform\", `translate(${ Math.floor(transform.x) }px, ${ Math.floor(transform.y) }px) scale(${ transform.k })`);\n\n    const bound = viewBound(width, height, transform);\n\n    const nodesInView = nodes.filter((d) => boundOverlap(bound, nodeBound(d)));\n    const labelsInView = labels.filter((d) => boundOverlap(bound, nodeBound(d)));\n    const labelsNotInView = labels.filter((d) => !boundOverlap(bound, nodeBound(d)));\n    const countLabelsInView = countLabels.filter((d) => boundOverlap(bound, nodeBound(d)));\n    const hiddenCountLabels = countLabels.filter((d) => !boundOverlap(bound, nodeBound(d)));\n\n    nodesInView\n      .call(hideSmall, transform)\n\n    labelsInView\n      .style('visibility', 'visible')\n      .call(fitLabels, transform, labelFont, labelHeight, bound);\n\n    labelsNotInView.style('visibility', 'hidden');\n\n    countLabelsInView\n      .style('visibility', 'visible')\n      .call(fitCounts, transform, countLabelFont, countLabelHeight, bound);\n\n    hiddenCountLabels.style(\"visibility\", \"hidden\");\n  };\n\n  function zoomTo(datum, animate = true) {\n    const size = datum.r * 2 * (1 + viewPadding);\n    const k = Math.min(width, height) / size;\n    const transform = zoomIdentity\n      .scale(k)\n      .translate(\n          - datum.x + width / 2 / k,\n          - datum.y + height / 2 / k,\n      );\n\n    zoomBehavior.transform(\n      !animate ? zoomRoot : zoomRoot.transition().duration(1000),\n      transform\n    );\n  }\n\n  if (state.transform) {\n    zoomToTransform(state.transform);\n  }\n\n  state.zoomTo = zoomTo;\n  state.zoomToTransform = zoomToTransform;\n\n  return state;\n};\n\nconst hideSmall = (nodes, transform) => {\n  const tooSmall = (d) => d.r * transform.k < 1;\n\n  nodes\n    .filter(\":not(.viz-zoomMinutia)\")\n    .filter((d) => tooSmall(d))\n    .classed(\"viz-zoomMinutia\", true);\n\n  nodes\n    .filter(\".viz-zoomMinutia\")\n    .filter((d) => !tooSmall(d))\n    .classed(\"viz-zoomMinutia\", false)\n};\n\nconst fitCounts = (countLabels, transform, font, countHeight, viewBound) => {\n  const fitVertically = (d) => (d.r * 2 - d.labelSize) * transform.k * 0.66 >= countHeight;\n\n  countLabels\n    .style(\"visibility\", (d) => fitVertically(d) ? \"visible\" : \"hidden\")\n    .filter(fitVertically)\n    .text((datum) => {\n      const labelText = datum.value;\n      const maxWidth = Math.floor(datum.r * 2 * 0.75 * transform.k);\n      return fitText(font, labelText, maxWidth);\n    })\n    .attr(\"transform\", (d) => {\n      return zoomIdentity\n        .translate(transform.applyX(d.x), transform.applyY(d.y - (d.labelSize / 2)))\n    });\n};\n\nconst fitLabels = (labels, transform, labelFont, labelHeight, viewBound) => {\n  const fitVertically = (d) => d.labelSize * transform.k >= labelHeight;\n\n  labels\n    .style(\"visibility\", (d) => (fitVertically(d) ? \"visible\" : \"hidden\"))\n    .filter(fitVertically)\n    .text((datum) => {\n      const labelText = `${datum.data.fieldValue} (${datum.value})`;\n      // We'll try to fit more text on the label at the expense\n      // of possibly having labels extend outside of their area.\n      const maxWidth = Math.floor(datum.labelSize * transform.k * 1.2);\n      return fitText(labelFont, labelText, maxWidth);\n    })\n    .attr(\"transform\", (d) => {\n      return zoomIdentity\n        .translate(transform.applyX(d.x), transform.applyY(d.y + d.labelY))\n    })\n};\n\n/**\n * The bound of the view given the original width, height, and transform\n */\nconst viewBound = (width, height, transform) => {\n  var size = Math.min(width, height);\n  var boundWidth = size * Math.max(width / height, 1);\n  var boundHeight = size * Math.max(height / width, 1);\n\n  var bound = [\n    -transform.x / transform.k,\n    -transform.y / transform.k,\n    (-transform.x + boundWidth) / transform.k,\n    (-transform.y + boundHeight) / transform.k\n  ];\n  return bound;\n};\n\nconst nodeBound = (datum) => [\n  datum.x - datum.r,\n  datum.y - datum.r,\n  datum.x + datum.r,\n  datum.y + datum.r\n];\n\nconst boundOverlap = (bound0, bound1) => {\n  return (\n    bound0[0] <= bound1[2] &&\n    bound0[2] >= bound1[0] &&\n    bound0[1] <= bound1[3] &&\n    bound0[3] >= bound1[1]\n  );\n};\n\nconst getLabelStyle = (labels) => {\n  let font = null,\n    height = null;\n  if (labels.size() > 0) {\n    font = getFont(labels.nodes()[0]);\n    height = measureText(font, \"M\")[1];\n  }\n\n  return [font, height];\n};\n\nexport default setupZoom;\n","import { map, join, path } from \"ramda\";\nimport { select, event as d3Event } from \"d3-selection\";\n\nconst setupTooltip = ({ nodeRoot, tooltip, fields }) => {\n  tooltip\n    .style(\"display\", \"block\")\n    .style(\"position\", \"absolute\")\n    .style(\"transform\", null)\n    .style(\"top\", \"0px\")\n    .style(\"left\", \"0px\");\n\n  const boundingRect = tooltip.node().getBoundingClientRect();\n\n  const offsetLeft = -boundingRect.left + 5;\n  const offsetTop = -boundingRect.top + 5;\n\n  // Measurements need to be taken before hiding the tooltip, otherwise they are\n  // not accurate.\n  tooltip.style(\"display\", \"none\")\n\n  nodeRoot.on(\"mousemove\", () => {\n    const event = d3Event;\n    showTooltip(event, fields, offsetTop, offsetLeft, tooltip);\n\n  });\n};\n\nconst showTooltip = (event, fields, offsetTop, offsetLeft, tooltip) => {\n  const target = select(event.target);\n  const datum = target.datum();\n  const text = content(datum, fields);\n  if (text) {\n    tooltip.node().innerHTML = text;\n    tooltip\n      .style(\"display\", \"block\")\n      .style(\"transform\", `translate3d(${ event.x + offsetLeft + 1 }px, ${ event.y + offsetTop + 1 }px, 0)`)\n  } else {\n    tooltip.style(\"display\", \"none\");\n  }\n  //tooltip.classed(\"searchResult\", datum.data.isSearchResult);\n};\n\nconst content = (datum, fields) => {\n  if (datum.depth > 0 && datum.height > 0) {\n    let cont = `${ datum.data.fieldValue } (${datum.value})`;\n    if(datum.data.searchResultCount > 0){\n      cont += `<br/><span>${datum.data.searchResultCount} search results</span>`\n    }\n    return cont;\n  } else if (datum.height === 0) {\n    const pairs = map(\n      (field) => [`<strong>${ field.displayName }</strong>`, path(field.path, datum.data)],\n      fields\n    );\n    return map(join(\": \"), pairs).join(\"<br />\");\n  } else {\n    return null;\n  }\n};\n\nexport default setupTooltip;\n","import { times, concat } from \"ramda\";\nimport { scaleLinear, scalePow } from 'd3-scale';\nimport { hcl } from \"d3-color\";\n\nconst colorScheme = [\n  \"#a6cee3\",\n  \"#3366cc\",\n  \"#b2df8a\",\n  \"#33a02c\",\n  \"#fb9a99\",\n  \"#996699\",\n  \"#fdbf6f\",\n  \"#ff7f00\",\n  \"#cc99ff\",\n  \"#6a3d9a\",\n  \"#ffff99\",\n  \"#b15928\",\n  \"#ffcc99\",\n  \"#333399\"\n];\n\nconst extendColorScheme = (colorScheme, count) => {\n  const extraLayers = Math.floor(count / colorScheme.length);\n\n  if (extraLayers === 0) {\n    return colorScheme;\n  }\n\n  const extraColors = times((i) => {\n    const currentLayer = (i + colorScheme.length) / colorScheme.length;\n\n    const previous = hcl(colorScheme[i % colorScheme.length])\n    const neighbor = hcl(colorScheme[(i + 1) % colorScheme.length])\n\n    const hScale = scaleLinear()\n      .domain([0, extraLayers])\n      .range([previous.h, neighbor.h]);\n\n    const cScale = scalePow()\n      .exponent(5)\n      .domain([0, extraLayers])\n      .range([previous.c, 100]);\n\n    const lScale = scalePow()\n      .exponent(2)\n      .domain([0, extraLayers])\n      .range([previous.l, previous.l / 2]);\n\n    const h = hScale(currentLayer)\n    const c = cScale(currentLayer);\n    const l = lScale(currentLayer);\n\n    const nextColor = hcl(h, c, l);\n    return nextColor.toString();\n  }, count - colorScheme.length);\n\n  return concat(colorScheme, extraColors)\n}\n\nexport { colorScheme, extendColorScheme };\n","import { selectAll, select, event as d3Event } from 'd3-selection';\n\nimport {\n  contains,\n  either,\n  equals,\n  fromPairs,\n  toPairs,\n  identity,\n  map,\n  path,\n  pipe,\n  sortBy,\n  uniq,\n  zip\n} from \"ramda\";\n\nimport { colorScheme, extendColorScheme } from './color-scheme';\n\nfunction setupLegend({ legend, data, hierarchyConfig, coloredField, legendConfig }) {\n  if (!coloredField) {\n    legend.style(\"display\", \"none\");\n\n    const state = { nodes: [] }\n\n    function update({ nodes }) {\n      state.nodes = nodes;\n      nodes.classed('viz-coloredNode', coloredField);\n      if (!coloredField) {\n        nodes.select('circle').attr('class', null);  \n        return;\n      }\n    }\n\n    return { update };\n  } else {\n    legend.style(\"display\", null);\n  }\n\n  const getValue = either(path(coloredField.path), path([\"fieldValue\"]));\n\n  // If coloring groupings, don't color devices with the same value\n  const isColoringGroup = contains(coloredField, hierarchyConfig);\n\n  const values = pipe(\n    map(getValue),\n    uniq,\n    sortBy(identity)\n  )(data);\n\n  const scheme = extendColorScheme(colorScheme, values.length);\n\n  const configs = scheme.map((color, index) => {\n    return {\n      color,\n      disabled: false,\n      className: `legend-color-${index}`\n    }\n  });\n\n  const coloring = zip(values, configs);\n  const colorMap = fromPairs(coloring);\n\n  createStylesheet(coloring);\n\n  const state = { nodes: [] }\n\n  function update({ nodes }) {\n    state.nodes = nodes;\n    nodes.classed('viz-coloredNode', coloredField);\n    if (!coloredField) {\n      nodes.select('circle').attr('class', null);   \n      return;\n    }\n\n    colorNodes({ nodes, colorMap, getValue, coloredField, isColoringGroup });\n    updateLegend({ legend, colorMap, toggleValue })\n  }\n\n  function toggleValue(value) {\n    colorMap[value].disabled = !colorMap[value].disabled;\n    update({ nodes: state.nodes });\n  }\n\n  return { update };\n}\n\nconst updateLegend = ({ legend, colorMap, toggleValue }) => {\n  const items = legend\n    .selectAll(\"p.viz-legendItem\")\n    .data(toPairs(colorMap), ([value]) => value );\n\n  items.exit().remove();\n\n  const itemsEnter = items.enter().append(\"p\").classed(\"viz-legendItem\", true)\n  itemsEnter.append(\"span\").classed(\"viz-legendColor\", true);\n  itemsEnter.append(\"span\").classed(\"viz-legendLabel\", true);\n\n  items.merge(itemsEnter)\n    .classed(\"viz-legendDisabled\", (d) => d[1].disabled);\n\n  items.merge(itemsEnter)\n    .select(\".viz-legendColor\")\n    .style(\"background-color\", ([value, { color }]) => color);\n\n  items.merge(itemsEnter)\n    .select(\".viz-legendLabel\")\n    .attr('title', ([value]) => value)\n    .text(([value]) => value);\n\n  legend.on('click.toggle', () => {\n    const datum = select(d3Event.target).datum();\n    if (datum) {\n      toggleValue(datum[0]);\n    }\n  })\n}\n\n/**\n * Having inline style trigger an expensive \"recalculate style\" in every frame\n * during zooming (even if the style attribute is empty!).\n *\n * We work around this by creating a style element that contains a class for\n * each item in the legend and assign those classes to each circle.\n*/\nconst createStylesheet = (coloring) => {\n  const style = selectAll('style#coloring').data([coloring]);\n  const styleEnter = style.enter().append('style').attr('id', 'coloring');\n\n  const html = coloring.map(([ value, { color, className } ], index) => {\n    return `\n      .viz-node circle.${className} {\n        fill: ${color} !important\n      }\n    `\n  }).join(\"\\n\");\n\n  style.merge(styleEnter)\n    .html(html)\n}\n\nconst colorNodes = ({ nodes, colorMap, getValue, coloredField, isColoringGroup }) => {\n  \n  nodes\n    .filter((d) => d.height === 0)\n    .select(\"circle\")\n    .attr('class', (d) => {\n      const { disabled, className } = colorMap[getValue(d.data)] || {};\n      return !isColoringGroup && !disabled && className ? className : null\n    });\n\n  nodes\n    .filter((d) => d.height > 0)\n    .classed(\"viz-coloredNode\", (d) => {\n      const { disabled } = colorMap[getValue(d.data)] || {};\n      return !disabled &&\n        equals(d.data.field, coloredField) \n    })\n    .select(\"circle\")\n    .attr('class', (d) => {\n      const { disabled, className } = colorMap[getValue(d.data)] || {};\n      return isColoringGroup\n        && equals(d.data.field, coloredField)\n        && !disabled\n        && className;\n    });\n}\n\nexport default setupLegend;\n","import { select, event as d3Event } from \"d3-selection\";\n\nimport { ResizeSensor } from \"css-element-queries\";\nimport debounce from \"lodash.debounce\";\n\nimport {\n  allPass,\n  eqProps,\n  eqBy,\n  find,\n  map,\n  reduce,\n  reduceWhile,\n  reduced,\n  reverse,\n  tail\n} from \"ramda\";\n\nimport packWithLabel from \"./d3-viz/pack-with-label\";\nimport toHierarchy from \"./d3-viz/to-hierarchy\";\nimport appendCircles from \"./d3-viz/append-circles\";\nimport setupZoom from \"./d3-viz/setup-zoom\";\nimport setupTooltip from \"./d3-viz/setup-tooltip\";\nimport setupLegend from \"./d3-viz/setup-legend\";\nimport datumKey from \"./d3-viz/datum-key\";\n\nfunction d3Viz(rootNode) {\n  const root = select(rootNode);\n  // const width = rootNode.clientWidth;\n  // const height = rootNode.clientHeight;\n\n  /**\n   * Stationary div that receive mouse events for zooming.\n   */\n  const zoomRoot = root\n    .append(\"div\")\n    .attr(\"data-node\", \"zoomRoot\")\n    .style(\"position\", \"relative\")\n    .style(\"width\", \"100%\")\n    .style(\"height\", \"100%\");\n\n  root.style(\"position\", \"relative\");\n\n  /**\n   * The container that is scaled and transformed.\n   *\n   * Use a div with CSS 3D transform to get hardware acceleration.\n   * SVG transform are not hardware accelerated.\n   */\n  const transformRoot = zoomRoot\n    .append(\"div\")\n    .attr(\"data-node\", \"transformRoot\")\n    .style(\"position\", \"absolute\")\n    .style(\"top\", 0)\n    .style(\"left\", 0)\n    .style(\"width\", \"100%\")\n    .style(\"height\", \"100%\")\n    .style(\"transform-origin\", \"top left\");\n\n  /**\n   * Label are placed in a separate element so that they are not scaled\n   * together with the circles.\n   */\n  const labelRoot = zoomRoot\n    .append(\"svg\")\n    .style(\"position\", \"absolute\")\n    .style(\"pointer-events\", \"none\") // Let the underlying circles get mouse events.\n    .style(\"top\", 0)\n    .style(\"left\", 0)\n    .style(\"width\", \"100%\")\n    .style(\"height\", \"100%\");\n\n  const svg = transformRoot.append(\"svg\").style(\"overflow\", \"visible\");\n\n  const tooltip = root.append(\"div\").classed(\"viz-tooltip\", true);\n  const legend = root.append(\"div\").classed(\"viz-legend\", true);\n\n  const nodeRoot = svg.append(\"g\");\n\n  // State\n  let props = {\n    hierarchyConfig: null,\n    data: null,\n    fields: null,\n    width: rootNode.clientWidth,\n    height: rootNode.clientHeight,\n    showNodes: true,\n    coloredField: null,\n    queryString: ''\n  };\n\n  const state = {\n    packedData: null,\n    nodes: null,\n    labels: null,\n    countLabels: null,\n    zoom: null,\n    selectedNode: null,\n    legend: null\n  };\n\n  new ResizeSensor(rootNode, debounce(() => update(props), 100));\n\n  function update(nextProps) {\n    nextProps = {\n      ...nextProps,\n      width: rootNode.clientWidth,\n      height: rootNode.clientHeight,\n      hasSearch: nextProps.hasSearch\n    };\n\n    const dataUpdated = !allEqProps(\n      [\"hierarchyConfig\", \"data\", \"fields\", \"queryString\"],\n      props,\n      nextProps\n    );\n\n    const sizeUpdated = !allEqProps([\"width\", \"height\"], props, nextProps);\n\n    const legendUpdated = !allEqProps([\"coloredField\", \"hierarchyConfig\", \"data\"], props, nextProps);\n\n    props = nextProps;\n\n    if (dataUpdated) {\n      repack(props, state);\n    }\n\n    rerender(props, state);\n\n    if (legendUpdated) {\n      resetLegend(props, state);\n    } else {\n      state.legend && state.legend.update({ nodes: state.nodes })\n    }\n\n    if (sizeUpdated || dataUpdated) {\n      resetZoom(props, state);\n    }\n  }\n\n  const repack = (props, state) => {\n    const hierarchy = makeHierarchy(props.data, props.hierarchyConfig);\n\n    const pack = packWithLabel().size([props.width, props.height]);\n\n    // Pack once without padding to calculate the radius of the leaf node\n    // then repack with new padding, similar to how d3-pack\n    // works when the size is not given.\n    //\n    // This way spacing between leaf nodes is consistent between visualizations.\n    //\n    // Doesn't seem to have a noticable performance impact.\n    const packed = pack(hierarchy);\n    const padding = packed.leaves()[0].r;\n    pack.padding((d) => padding * d.height);\n\n    state.packedData = pack(hierarchy);\n  };\n\n  const rerender = (props, state) => {\n    const [nodes, labels, countLabels] = appendCircles({\n      nodeRoot: nodeRoot,\n      labelRoot: labelRoot,\n      packedData: state.packedData,\n      showNodes: props.showNodes,\n      hasSearch: props.queryString !== ''\n    });\n\n    setupTooltip({\n      tooltip: tooltip,\n      fields: props.fields,\n      nodeRoot: nodeRoot\n    });\n\n    state.nodes = nodes;\n    state.labels = labels;\n    state.countLabels = countLabels;\n  };\n\n  const resetLegend = (props, state) => {\n    state.legend = setupLegend({\n      legend: legend,\n      hierarchyConfig: props.hierarchyConfig,\n      data: props.data,\n      coloredField: props.coloredField\n    });\n\n    if(state.legend != null){\n      state.legend.update({ nodes: state.nodes })\n    }\n  };\n\n  const resetZoom = (props, state) => {\n    state.zoom = setupZoom({\n      zoomRoot: zoomRoot,\n      transformRoot: transformRoot,\n      nodes: state.nodes,\n      labels: state.labels,\n      countLabels: state.countLabels,\n      width: props.width,\n      height: props.height,\n      packedData: state.packedData\n    });\n\n    let animate = true;\n\n    if (state.selectedNode) {\n      const selected = findAncestor(state.selectedNode, state.packedData);\n      state.selectedNode = selected;\n      animate = false; // smarter animation??\n    } else {\n      state.selectedNode = state.packedData;\n    }\n\n    state.zoom.zoomTo(state.selectedNode, animate);\n\n    nodeRoot.on(\"click.select\", () => {\n      const datum = select(d3Event.target).datum();\n      state.selectedNode = datum;\n      state.zoom.zoomTo(datum);\n    });\n  };\n\n  return {\n    update\n  };\n}\n\nconst allEqProps = (props, o1, o2) => allPass(map(eqProps, props))(o1, o2);\n\nconst makeHierarchy = (data, hierarchyConfig) => {\n  const hierarchy = toHierarchy(data, hierarchyConfig).count();\n\n  const byUnknown = (a, b) => {\n    if (a.data.fieldValue === \"Unknown\") {\n      return b.data.fieldValue === \"Unknown\" ? 0 : 1;\n    } else {\n      return b.data.fieldValue === \"Unknown\" ? -1 : 0;\n    }\n  };\n\n  const bySize = (a, b) => (b.value || 0) - (a.value || 0);\n  const byName = (a, b) =>\n    (a.data.fieldValue || \"\").localeCompare(b.data.fieldValue || \"\");\n\n  return hierarchy.sort(composeComparators([byUnknown, bySize, byName]));\n};\n\n/**\n * Combine a list of comparator function ( (a, b) => Boolean )\n * in order into a single comparator.\n */\nconst composeComparators = (comparators) => (a, b) =>\n  reduceWhile(\n    (result) => result === 0, // keep comparing while a === b\n    (_, comparator) => comparator(a, b),\n    0,\n    comparators\n  );\n\n/**\n * Find the lowest ancestors of a node (or it self) that exists in a tree.\n */\nconst findAncestor = (node, hierarchy) => {\n  const path = reverse(node.ancestors());\n  const findChild = (parent, child) => {\n    return find(eqBy(datumKey, child), parent.children || []);\n  };\n\n  const res = reduce(\n    (last, child) => findChild(last, child) || reduced(last),\n    hierarchy,\n    tail(path)\n  );\n  return res;\n};\n\nexport default d3Viz;\n","import React from \"react\";\nimport ReactDOM from 'react-dom';\n\nimport { connect } from \"react-redux\";\n\nimport { selectDataset, selectConfiguration } from \"domain/dataset\";\nimport { getQueryString } from \"epics/index-dataset-epic\";\nimport { selectControls } from \"domain/controls\";\n\nimport d3Viz from './d3-viz';\nimport styles from './Visualization.module.css';\n\nclass Visualization extends React.PureComponent {\n\n  componentDidMount() {\n    const el = ReactDOM.findDOMNode(this);\n    this.viz = d3Viz(el);\n    this.updateFromProps();\n  }\n\n  updateFromProps() {\n    this.viz.update({\n      hierarchyConfig: this.props.controls.hierarchyConfig,\n      fields: this.props.configuration.fields || [],\n      showNodes: this.props.controls.shouldShowNodes,\n      coloredField: this.props.controls.colorBy,\n      data: this.props.dataset || [],\n      queryString: this.props.queryString\n    });\n  }\n\n  componentDidUpdate() {\n    this.updateFromProps();\n  }\n\n  render() {\n    return <div className={ styles.viz }></div>;\n  }\n}\n\nconst mapStateToProps = (state) => {\n  const owner = Object.keys(state.dataset.datasets)[0] || \"\"\n  return {\n    dataset: selectDataset(state, owner),\n    configuration: selectConfiguration(state, owner),\n    controls: selectControls(state),\n    queryString: getQueryString(state)\n  };\n};\n\nexport default connect(mapStateToProps, null)(Visualization);\n","import { createAction } from 'redux-actions';\nimport { ofType } from 'redux-observable';\nimport {  timer, of } from 'rxjs';\nimport { mergeMap, takeUntil, debounceTime } from 'rxjs/operators';\n\nimport { setIsFetching } from \"domain/dataset\";\nimport { fetchDataset } from './fetch-dataset-epic';\n\n// ACTIONS\nconst startRefresh = createAction('START_REFRESH_DATASET');\nconst stopRefresh = createAction('STOP_REFRESH_DATASET');\n\n// EPIC\nconst refreshDatasetEpic = (action$, store) => {\n  return action$.pipe(\n    ofType(startRefresh.toString())\n    ,debounceTime(500)\n    ,mergeMap((action) => {\n      const owner = action.payload.owner\n      const url = action.payload.url;\n      const header = action.payload.header;\n      const interval = action.payload.interval * 1000;\n      return timer(0, interval).pipe(\n          mergeMap(() => {\n            return of(\n              setIsFetching({'owner': owner, 'isFetching': true})\n              ,fetchDataset({'owner': owner, 'url': url, 'header':header})\n            )\n          })\n        ,takeUntil(action$.ofType(stopRefresh.toString()))\n        )\n    })  \n  );\n}\n\nexport default refreshDatasetEpic;\nexport { startRefresh, stopRefresh };","import { createAction } from \"redux-actions\";\nimport { Observable, of } from \"rxjs\";\nimport { catchError, debounceTime, mergeMap, map } from 'rxjs/operators';\n\nimport { setError } from \"domain/error\"\n\nimport { loadDataset, CSVconvert } from './load-dataset-epic';\n\n// ACTIONS\nconst uploadDataset = createAction(\"UPLOAD_DATASET\");\n\n// EPIC\nconst uploadDatasetEpic = (action$, store) => {\n  return action$\n    .ofType(uploadDataset.toString()).pipe(\n      mergeMap((action) => {\n        const owner = action.payload.owner;\n        const file = action.payload.file;\n        return fromReader(owner, file).pipe(\n            debounceTime(500)\n            ,map(CSVconvert)\n            ,map(fromJson)\n            ,map(loadDataset)\n            ,catchError((error) => {\n              if (error instanceof SyntaxError) {\n                const newErr = new Error(\"Invalid JSON.\");\n                return of(setError(newErr));\n              } else {\n                /* istanbul ignore next */\n                throw error;\n              }\n            })\n          )\n      })\n    );\n};\n\n/**\n * Little function to create an observable to read local files.\n * RxJS DOM v5 doesn't have it!?\n */\nconst fromReader = (owner, file) => {\n  return Observable.create((observer) => {\n    const reader = new window.FileReader();\n\n    reader.addEventListener('load', () => {\n      observer.next({ 'owner': owner, 'file': reader.result });\n      observer.complete();\n    });\n\n    reader.addEventListener('error', () => {\n      observer.error(reader.error);\n      observer.complete();\n    });\n\n    reader.readAsText(file)\n  });\n}\n\nconst fromJson = (payload) =>{\n  const owner = payload.owner;\n  const content = JSON.parse(payload.file);\n\n  return {'owner': owner, 'content': content};\n}\n\nexport default uploadDatasetEpic;\nexport { uploadDataset, fromJson };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isNil, find, propEq } from \"ramda\";\n\nfunction DatasetSelector({ className, selected, datasets, onChange }) {\n  return (\n    <div className={className}>\n      <label className=\"select\">\n      <select\n        onChange={(evt) => onChange(find(eqUrl(evt.target.value), datasets)) }\n        value={isNil(selected) ? \"\" : selected.url}\n      >\n        <option value=\"\">&mdash;None&mdash;</option>\n        {datasets.map((dataset) => {\n          return (\n            <option key={dataset.url} value={dataset.url}>\n              {dataset.name}\n            </option>\n          );\n        })}\n      </select>\n      </label>\n    </div>\n  );\n}\n\nconst eqUrl = propEq(\"url\");\n\nconst PropTypesDataset = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired\n});\n\nDatasetSelector.propTypes = {\n  className: PropTypes.string,\n  selected: PropTypesDataset,\n  datasets: PropTypes.arrayOf(PropTypesDataset).isRequired,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default DatasetSelector;\n","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { isNil } from \"ramda\";\n\nimport { FontAwesomeIcon }from \"@fortawesome/react-fontawesome\";\nimport { faUpload } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction DatasetUpload({ className, selected, onChange, ownerUuid }) {\n  const inputId = \"file-input-\" + ownerUuid;\n  return (\n    <span className={ className }>\n      <input\n        type=\"file\"\n        id={inputId}\n        value=''\n        style={{'display':'none'}}\n        onChange={(evt) => onChange(evt.target.files[0])}\n      />\n\n    <span>\n      { isNil(selected) ? \"No file selected\" : selected }\n    </span>\n\n      <label htmlFor={inputId} className=\"button circular\" title=\"Upload data from file\">\n        <FontAwesomeIcon icon={faUpload} />\n      </label>\n    </span>\n  );\n}\n\nDatasetUpload.propTypes = {\n  ownerUuid: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  selected: PropTypes.string,\n  onChange: PropTypes.func.isRequired\n};\n\nexport default DatasetUpload;\n","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faDownload } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction DatasetDownload({ className, selected, url, disabled }) {\n  return (\n    <span className={ className }>\n      <a className=\"button circular\" href={ url } download={ selected + \".json\" }\n        title=\"Download\" disabled={disabled} >\n        <FontAwesomeIcon icon={faDownload} />\n      </a>\n    </span>\n  );\n}\n\nDatasetDownload.propTypes = {\n  className: PropTypes.string,\n  selected: PropTypes.string,\n  url: PropTypes.string\n};\n\nexport default DatasetDownload;\n","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faRedoAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction DatasetRefresh({ className, onClick, disabled }) {\n  return (\n    <span className={ className }>\n      <div className=\"button circular\" disabled={disabled} title=\"Refresh\" onClick={() => onClick()}>\n        <FontAwesomeIcon icon={faRedoAlt} />\n      </div>\n    </span>\n  );\n}\n\nDatasetRefresh.propTypes = {\n  className: PropTypes.string,\n  onClick: PropTypes.func.isRequired\n};\n\nexport default DatasetRefresh;\n","import React from \"react\";\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSyncAlt,faStopCircle } from \"@fortawesome/free-solid-svg-icons\";\n\nfunction DatasetTimedRefresh({ className, interval, timerIsRunning, disabled, onIntervalChange, onStartClick, onStopClick }) {\n  return (\n    <span className={ className }>\n      <input type='text' title=\"Refresh interval in seconds\" value={interval} onChange={(evt) => onIntervalChange(evt.target.value)}/>\n      {!timerIsRunning && \n\t      <div className=\"button circular\" disabled={disabled} title=\"Start Refresh Timer\" onClick={() => onStartClick()}>\n\t        <FontAwesomeIcon icon={faSyncAlt} />\n\t      </div>\n  \t  }\n  \t  {timerIsRunning && \n\t      <div className=\"button circular\" disabled={disabled} title=\"Stop Refresh Timer\" onClick={() => onStopClick()}>\n\t        <FontAwesomeIcon icon={faStopCircle} />\n\t      </div>\n  \t  }\n    </span>\n  );\n}\n\nDatasetTimedRefresh.propTypes = {\n  className: PropTypes.string,\n  interval: PropTypes.number,\n  timerIsRunning: PropTypes.bool,\n  onIntervalChange: PropTypes.func.isRequired,\n  onStartClick: PropTypes.func.isRequired,\n  onStopClick: PropTypes.func.isRequired\n};\n\nexport default DatasetTimedRefresh;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { isNil } from \"ramda\";\nimport Modal from 'react-modal';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCheck, faTimes, faCog } from \"@fortawesome/free-solid-svg-icons\";\n\nimport { fetchDataset, buildAuthHeader } from \"epics/fetch-dataset-epic\";\nimport { startRefresh, stopRefresh } from \"epics/refresh-dataset-epic\";\nimport { uploadDataset } from \"epics/upload-dataset-epic\";\nimport { removeSearchIndex } from \"epics/index-dataset-epic\";\nimport { showNodes, setHierarchyConfig, colorBy } from \"domain/controls\"\n\nimport { setError } from \"domain/error\"\nimport { setDataset, selectDataset, removeDataset, getIsFetching, setIsFetching, getLastUpdated } from \"domain/dataset\";\n\nimport DatasetSelector from \"./DatasetSelector\";\nimport DatasetUpload from \"./DatasetUpload\";\nimport DatasetDownload from \"./DatasetDownload\";\nimport DatasetRefresh from \"./DatasetRefresh\";\nimport DatasetTimedRefresh from \"./DatasetTimedRefresh\";\n\nimport style from \"./DatasetControls.module.css\";\n\nconst uuidv4 = require('uuid/v4');\n\nconst CUSTOM_DATASET = {\n  name: \"Custom URL\",\n  url: \"custom-url\"\n};\n\nconst authTypes = [\n  {'name': '-None-', 'scheme':'None' },\n  {'name': 'Username\\\\Password', 'scheme':'Basic' },\n  {'name': 'Token', 'scheme':'Bearer' },\n];\n\nvar host = window.location.host;\nvar hostname = window.location.hostname;\nvar port = '80';\nconst radix = 10;\nif (host.indexOf(':') > -1) {\n  port = String(parseInt(host.split(\":\")[1], radix)-1);\n}\n\nvar POSEIDON_DATASET = {\n  name: \"Poseidon Network\",\n  url: \"http://\"+hostname+\":\"+port+\"/v1/network\"\n};\n\nModal.setAppElement('#root');\n\nclass DatasetControls extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dataset: null,\n      selected: null,\n      selectedFile: null,\n      showUrlEntry: false,\n      url: '',\n      authScheme:'',\n      token: '',\n      username: '',\n      password: '',\n      refreshInterval: 0,\n      refreshTimerRunning: false\n    };\n  }\n\n  resetDataset = () => {\n    this.props.setDataset({ dataset: [], configuration: {} });\n    this.setState({\n      selected: null,\n      selectedFile: null\n    });\n  }\n\n  fetchAndSetDataset = (url, dataset, username, password, token) => {\n    this.props.setIsFetching({owner: this.props.uuid, isFetching: true});\n    const authHeader = buildAuthHeader(username, password, token);\n    if (toURL(url)) {\n      this.props.fetchDataset({ 'owner': this.props.uuid, 'url': url, 'header': authHeader });\n      this.setState({\n        selected: dataset,\n        selectedFile: null,\n      });\n    } else {\n      this.props.setError(new Error(\"Please enter a valid URL.\"));\n    }\n  }\n\n  onSelected = (dataset) => {\n    if (isNil(dataset)) {\n      return this.resetDataset();\n    }\n\n    this.props.removeDataset({owner: this.props.uuid});\n    this.props.removeSearchIndex({owner: this.props.uuid});\n    this.props.setHierarchyConfig([]);\n    this.props.colorBy(null);\n    this.props.showNodes(true);\n    this.props.stopRefresh();\n\n    const showUrlEntry = dataset === CUSTOM_DATASET;\n    this.setState({ \n      showUrlEntry: showUrlEntry,\n      url: '',\n      authScheme:null,\n      token: '',\n      username: '',\n      password: '',\n      refreshInterval: 0,\n      refreshTimerRunning: false,\n     });\n    if(!showUrlEntry)\n    {\n      const url = dataset.url;\n      this.fetchAndSetDataset(url, dataset, null, null, null);\n    }\n  }\n\n  onUpload = (file) => {\n    this.props.setHierarchyConfig([]);\n    this.props.colorBy(null);\n    this.props.uploadDataset({ 'owner': this.props.uuid, 'file': file });\n    this.props.stopRefresh();\n    this.setState({\n      selected: null,\n      selectedFile: file.name,\n      refreshInterval: 0,\n      refreshTimerRunning: false,\n    });\n  }\n\n  onUrlChange = (evt) => {\n    this.setState({ url: evt.target.value });\n  }\n\n  onTokenChange = (evt) => {\n    this.setState({ token: evt.target.value });\n  }\n\n  onUsernameChange = (evt) => {\n    this.setState({ username: evt.target.value });\n  }\n\n  onPasswordChange = (evt) => {\n    this.setState({ password: evt.target.value });\n  }\n\n  onUrlOk = () => {\n    this.setState({ showUrlEntry: false });\n    const dataset = CUSTOM_DATASET;\n    if(!isNil(this.state.url))\n    {\n      const url = this.state.url;\n      dataset.url = url;\n      this.fetchAndSetDataset(url, dataset, this.state.username, this.state.password, this.state.token);\n    }\n  }\n\n  onUrlCancel = () => {\n    this.setState({ \n      showUrlEntry: false,\n      url: '',\n      authScheme:'',\n      token: '',\n      username: '',\n      password: '',\n     });\n  }\n\n  getDownloadUrl = () => {\n    const urlObject = window.URL || window.webkitURL || window;\n    const json = JSON.stringify({'dataset': this.props.dataset});\n    const blob = new Blob([json], {'type': \"application/json\"});\n    const url = urlObject.createObjectURL(blob);;\n    return url;\n  }\n\n  onRefresh = () =>{\n    const url = this.state.selected.url;\n    const dataset = this.state.selected;\n    this.fetchAndSetDataset(url, dataset, this.state.username, this.state.password, this.state.token);\n  }\n\n  onTimedRefreshStart = () =>{\n    this.props.setIsFetching({'owner': this.props.uuid, 'isFetching': true});\n    this.setState({\n      'refreshTimerRunning': true\n    });\n    const authHeader = buildAuthHeader(this.state.username, this.state.password, this.state.token);\n    const url = this.state.selected.url;\n    const interval = this.state.refreshInterval;\n    this.props.startRefresh({'owner': this.props.uuid,'url': url, 'header': authHeader, 'interval': interval});\n  }\n\n  onTimedRefreshStop = () =>{\n    this.setState({\n      'refreshTimerRunning': false\n    });\n    this.props.stopRefresh();\n  }\n\n  onTimedRefreshIntervalChanged = (interval) =>{\n    const numInt = parseInt(interval, 10);\n    if(!isNaN(numInt)){\n      this.setState({\n        refreshInterval: numInt,\n      });\n    }\n    else if(!interval){\n      this.setState({\n        refreshInterval: null,\n      });\n    }\n  }\n\n  render() {\n    if (port === '80') {\n      POSEIDON_DATASET = {name:\"\",url:\"\"};\n    }\n    const canDownload = this.state.selected && !this.state.selectedFile;\n    const canRefresh = this.state.selected && !isNil(this.state.selected.url)\n    return (\n      <div className={style.dataControls}>\n        <div className={style.selectorContainer}>\n          <span className={style.label}>Dataset</span>\n          <DatasetSelector\n            className={style.selector}\n            selected={this.state.selected}\n            onChange={this.onSelected}\n            datasets={[...this.props.datasets, POSEIDON_DATASET, CUSTOM_DATASET]}\n          />\n        </div>\n\n        <div className={style.uploadContainer}>\n          <span className={style.label}>Upload</span>\n          <DatasetUpload\n            ownerUuid={this.props.uuid}\n            className={style.fileUpload}\n            selected={this.state.selectedFile}\n            onChange={this.onUpload}\n          />\n        </div>\n\n          <div className={style.utilityContainer}>\n          { canDownload &&\n            <DatasetDownload\n              className={style.fileDownload}\n              selected={this.state.selected.name}\n              url={this.getDownloadUrl()}\n              disabled={this.props.isFetching}\n            />\n          }\n          { canRefresh &&\n            <div className={style.urlRefreshContainer}>\n              <DatasetRefresh\n                className={style.urlRefresh}\n                onClick={this.onRefresh}\n                disabled={this.props.isFetching}\n              />\n              <DatasetTimedRefresh\n                className={style.urlRefresh}\n                interval={this.state.refreshInterval}\n                timerIsRunning={this.state.refreshTimerRunning}\n                disabled={this.props.isFetching}\n                onIntervalChange={this.onTimedRefreshIntervalChanged}\n                onStartClick={this.onTimedRefreshStart}\n                onStopClick={this.onTimedRefreshStop}\n              />\n            </div>\n          }\n          </div>\n          <div className={style.urlRefreshTime}>\n            { canRefresh && this.props.isFetching &&\n              <span>\n                <FontAwesomeIcon className=\"fa-spin\" icon={faCog} /> Fetching Data...\n              </span>\n            }\n            { canRefresh && !this.props.isFetching &&\n              <span>\n                Last Updated: { this.props.lastUpdated ? (this.props.lastUpdated.toLocaleDateString() || \"\") + \" \" + (this.props.lastUpdated.toLocaleTimeString() || \"\") : \"Never\" }\n              </span>\n            }\n          </div>\n          <Modal isOpen={ this.state.showUrlEntry } onRequestClose={this.onUrlCancel} contentLabel=\"Enter a Url\">\n            <div className={ style.modal }>\n              <div className={ style.modalMain }>\n                <span>\n                  <label> URL </label>\n                  <input type=\"text\" value={this.state.url} onChange={ this.onUrlChange }/>\n                </span>\n                <span>\n                  <label> AuthType </label>\n                  <select\n                    onChange={(evt) => this.setState({ authScheme: evt.target.value })}\n                    value={isNil(this.state.authScheme) ? '' : this.state.authScheme}\n                  >\n                    {authTypes.map((at) => {\n                      return (\n                        <option key={at.scheme} value={at.scheme}>\n                          {at.name}\n                        </option>\n                      );\n                    })}\n                  </select>\n                </span>\n                { this.state.authScheme === 'Bearer' &&\n                  <span>\n                    <label> Token </label>\n                    <input type=\"text\" value={this.state.Token} onChange={ this.onTokenChange }/>\n                  </span> \n                }\n                { this.state.authScheme === 'Basic' &&\n                  <div>\n                    <span>\n                      <label> Username </label>\n                      <input type=\"text\" value={this.state.userName} onChange={ this.onUsernameChange }/>\n                    </span>\n                    <span>\n                      <label> Password </label>\n                      <input type=\"password\" value={this.state.password} onChange={ this.onPasswordChange }/>\n                    </span>\n                  </div>\n                }\n                <div>\n                  <span className={ style.centerSpan }>\n                    <div className=\"button circular\" title=\"Ok\" onClick={this.onUrlOk}>\n                        <FontAwesomeIcon icon={faCheck} />\n                    </div>\n                    <div className=\"button circular\" title=\"Cancel\" onClick={this.onUrlCancel}>\n                        <FontAwesomeIcon icon={faTimes} />\n                    </div>\n                  </span>\n                </div>\n              </div>\n            </div>\n          </Modal>\n      </div>\n    );\n  }\n}\n\nconst toURL = (url) => {\n  try {\n    return new URL(url)\n  } catch(error) {\n    if (error instanceof TypeError) {\n      return null;\n    } else {\n      throw error;\n    }\n  }\n}\n\nDatasetControls.defaultProps = {\n  uuid: uuidv4(),\n  datasets: [],\n  dataset: null,\n  isFetching: false,\n  lastUpdated: new Date(),\n};\n\nDatasetControls.propTypes = {\n  uuid: PropTypes.string,\n  datasets: PropTypes.array,\n  dataset: PropTypes.array,\n  fetchDataset: PropTypes.func.isRequired,\n  uploadDataset: PropTypes.func.isRequired,\n  setDataset: PropTypes.func.isRequired,\n  removeDataset: PropTypes.func.isRequired,\n  removeSearchIndex: PropTypes.func.isRequired,\n  getIsFetching: PropTypes.func.isRequired,\n  setIsFetching: PropTypes.func.isRequired,\n  showNodes: PropTypes.func.isRequired,\n  setHierarchyConfig: PropTypes.func.isRequired, \n  colorBy: PropTypes.func.isRequired,\n  startRefresh: PropTypes.func.isRequired,\n  stopRefresh: PropTypes.func.isRequired,\n  isFetching: PropTypes.bool,\n  lastUpdated: PropTypes.instanceOf(Date),\n  setError: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  const owner = ownProps.uuid;\n  return {\n    dataset: selectDataset(state,owner),\n    isFetching: getIsFetching(state, owner),\n    lastUpdated: getLastUpdated(state, owner)\n  };\n}\n\nconst mapDispatchToProps = {\n  fetchDataset,\n  uploadDataset,\n  setDataset,\n  selectDataset,\n  removeDataset,\n  removeSearchIndex,\n  getIsFetching,\n  setIsFetching,\n  showNodes,\n  setHierarchyConfig, \n  colorBy,\n  startRefresh,\n  stopRefresh,\n  setError\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DatasetControls);\n","import React, { Component } from \"react\";\nimport { connect } from 'react-redux';\nimport classNames from 'classnames';\nimport Modal from 'react-modal';\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCheck, faDizzy, faPlusCircle, faMinusCircle, faHome } from \"@fortawesome/free-solid-svg-icons\";\n\nimport { selectDataset, getLastUpdated } from 'domain/dataset';\nimport { setHierarchyConfig, showNodes, colorBy, selectControls } from 'domain/controls';\nimport { getError, clearError } from \"domain/error\";\n\nimport Header from 'features/header/Header';\nimport HierarchySelector from 'features/hierarchy-selector/HierarchySelector';\nimport MiscControls from 'features/misc-controls/MiscControls';\nimport SearchControls from 'features/search/SearchControls';\nimport Visualization from 'features/visualization/Visualization';\nimport DatasetControls from 'features/dataset-controls/DatasetControls';\n\nimport style from './App.module.css';\n\nimport datasets from './datasets';\n\nconst uuidv4 = require('uuid/v4');\n\nModal.setAppElement('#root');\n\nclass App extends Component {\n\n  state = {\n    showData: true,\n    showGrouping: false,\n    showFiltering: false,\n    uuid1: uuidv4(),\n    uuid2: uuidv4(),\n  }\n\n  toggleShowData = () =>{\n    this.setState({\n      showData: !this.state.showData,\n      showGrouping: false,\n      showFiltering: false,\n    });\n  }\n\n  toggleShowGrouping = () =>{\n    this.setState({\n      showData: false,\n      showGrouping: !this.state.showGrouping,\n      showFiltering: false\n    });\n  }\n\n  toggleShowFiltering = () =>{\n    this.setState({\n      showData: false,\n      showGrouping: false,\n      showFiltering: !this.state.showFiltering\n    });\n  }\n\n  onErrorClose = () => {\n    this.props.clearError();\n  }\n\n  resetControls = () => {\n    this.props.colorBy(null);\n    this.props.setHierarchyConfig([]);\n    this.props.showNodes(true);\n  }\n\n  render() {\n    const { dataset, darkTheme, error, lastUpdated } = this.props;\n    const hasDataset = dataset && dataset.length > 0;\n\n    const showData = this.state.showData;\n    const showGrouping = this.state.showGrouping;\n\n    return (\n      <div className={\n          classNames({\n            [style.appContainer]: true,\n            'darkTheme': darkTheme\n          })\n      }>\n        <input name=\"hideControls\" id=\"hideControls\" type=\"checkbox\" />\n        <label htmlFor=\"hideControls\" className={ style.hideControls }>\n          { /* <FontAwesomeIcon icon={faChevron} /> */ }\n          <span>&lt;&lt;</span>\n        </label>\n        <div className={ style.controls }>\n          <Header />\n          <div className={ classNames({ [style.centerSpan]: true }) }>\n            <div className=\"button circular\" title=\"Reset Controls\" size=\"3x\" onClick={this.resetControls}>\n              <FontAwesomeIcon icon={faHome} />\n            </div>\n          </div>\n          <div className={style.accordionHeader} onClick={this.toggleShowData}>\n            Data  {!showData && <FontAwesomeIcon icon={faPlusCircle} />}{showData && <FontAwesomeIcon onClick={this.toggleShowData} icon={faMinusCircle} />}\n          </div>\n          <div>\n            <div className={ classNames({ [style.section]: true, [style.hidden]: !showData }) }>\n              <DatasetControls uuid={ this.state.uuid1 } datasets={ datasets }/>\n            </div>\n          </div>\n\n          { hasDataset &&\n            <div className={ classNames({ [style.section]: true, [style.hidden]: !showData }) }>\n              <SearchControls />\n            </div>\n          }\n          <div className={style.accordionHeader} onClick={this.toggleShowGrouping}>\n            Grouping  {!showGrouping && <FontAwesomeIcon icon={faPlusCircle} />}{showGrouping && <FontAwesomeIcon  onClick={this.toggleShowGrouping} icon={faMinusCircle} />}\n          </div>\n          { hasDataset &&\n            <div className={ classNames({ [style.section]: true, [style.hierarchySection]: true, [style.hidden]: !showGrouping }) }>\n              <HierarchySelector />\n            </div>\n          }\n\n          { hasDataset &&\n            <div className={ classNames({ [style.section]: true, [style.hidden]: !showGrouping }) }>\n              <MiscControls />\n            </div>\n          }\n          { !hasDataset && \n            <div className={ classNames({ [style.section]: true, [style.dimSection]:true, [style.hierarchySection]: true, [style.hidden]: !showGrouping }) }>\n              Please select a dataset to continue\n            </div>\n          }\n        </div>\n        { dataset.length===0 && lastUpdated !== null &&\n          <div  className={ style.emptyDataset }>\n            <span>\n              Current dataset is empty\n            </span>\n          </div>\n        }\n\n        <div className={ style.canvas }>\n          <Visualization />\n        </div>\n        <Modal isOpen={ error !== null } onRequestClose={this.onErrorClose} contentLabel=\"An Error has occurred\">\n            <div className={ style.modal }>\n              <div className={ style.modalMain }>\n                <span className={ style.justifySpan }>\n                   <div className={ style.icon } title=\"Error\">\n                        <FontAwesomeIcon icon={faDizzy} size=\"7x\" color=\"#cc0000\"/>\n                    </div>\n                    <div>\n                      { error ? error.message : \"\"}\n                    </div>\n                </span>\n                <div>\n                  <span className={ style.centerSpan }>\n                    <div className=\"button circular\" title=\"Ok\" onClick={this.onErrorClose}>\n                        <FontAwesomeIcon icon={faCheck} />\n                    </div>\n                  </span>\n                </div>\n              </div>\n            </div>\n          </Modal>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  const owner = Object.keys(state.dataset.datasets)[0] || \"\"\n  return {\n    dataset: selectDataset(state, owner),\n    darkTheme: selectControls(state).darkTheme,\n    error: getError(state),\n    lastUpdated: getLastUpdated(state, owner),\n  }\n}\n\nconst mapDispatchToProps = {\n  clearError,\n  setHierarchyConfig, \n  showNodes, \n  colorBy, \n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createAction, handleActions } from \"redux-actions\";\nimport compileExpression from \"filtrex\";\n\nconst defaultState = {\n  filterString: \"\",\n  filter: null,\n  isValid: false\n};\n\n// ACTIONS\nconst setFilter = createAction(\"SET_FILTER\");\nconst clearFilter = createAction(\"CLEAR_FILTER\");\n\n// REDUCERS\nconst reducer = handleActions(\n  {\n    [setFilter]: (state, { payload }) => {\n\n\t  \tconst filterString = payload;\n\t  \tlet filter = null;\n\t  \tlet isValid = false;\n\t  \ttry\n\t  \t{\n\t  \t\tfilter = compileExpression(filterString);\n\t  \t\tisValid = true;\n\n\t  \t}\n\t  \tcatch(error)\n\t  \t{\n\t  \t\tfilter = null;\n\t  \t\tisValid = false;\n\n\t  \t}\n\t  \treturn { ...state, filterString, filter, isValid };\n\n    },\n    [clearFilter]: (state) => {\n     \tconst filterString = \"\";\n\t  \tlet filter = null;\n\t  \tlet isValid = false;\n      return { ...state, filterString, filter, isValid };\n    }\n  },\n  defaultState\n);\n\n// SELECTORS\nconst getFilter = (state) => state.filter.filter;\nconst filterIsValid = (state) => state.filter.isValid;\n\nexport default reducer;\n\nexport { setFilter, getFilter, clearFilter, filterIsValid};","import { combineReducers } from \"redux\";\nimport { searchReducer as search } from 'epics/index-dataset-epic'\nimport dataset from \"./dataset\";\nimport controls from \"./controls\";\nimport error from \"./error\";\nimport filter from \"./filter\";\n\nexport default combineReducers({\n  dataset,\n  search,\n  controls,\n  error,\n  filter\n});\n","import { createAction } from \"redux-actions\";\nimport { of, empty } from \"rxjs\";\nimport { mergeMap, map, tap, catchError } from 'rxjs/operators';\n\nimport { setError } from \"domain/error\"\nimport { getFilter } from \"domain/filter\"\nimport { setFilteredDataset } from \"domain/dataset\"\n\nconst filterDataset = createAction(\"FILTER_DATASET\");\n\nconst filterDatasetEpic = (action$, store) => {\n  return action$\n    .ofType(filterDataset.toString()).pipe(\n      mergeMap(({ payload}) => {\n        const filter = getFilter(store.value);\n\n        if(filter === null)\n          return empty();\n\n        return of(payload).pipe(\n            tap(applyFilter(payload, filter))\n            ,map((payload) =>\n              setFilteredDataset({\n                owner: payload.owner,\n                filtered: payload.filtered\n              })\n            )\n            ,catchError((error) => {\n               const newErr = new Error(\"Error filtering dataset: \" + error.message);\n               return of(setError(newErr));\n            })\n          );\n      })\n    );\n};\n\nconst applyFilter = (data, filter) => {\n  data.filtered = null;\n  const dataset = data.dataset;\n\n  if(filter !== null){\n    data.filtered = dataset.filter((item) => filter(item));\n  }\n\n  return data;\n};\n\nexport default filterDatasetEpic;\n\nexport { filterDataset };","import { combineEpics } from 'redux-observable';\nimport fetchDatasetEpic from './fetch-dataset-epic';\nimport uploadDatasetEpic from './upload-dataset-epic';\nimport loadDatasetEpic from './load-dataset-epic';\nimport searchDatasetEpic from './search-dataset-epic';\nimport indexDatasetEpic from './index-dataset-epic';\nimport refreshDatasetEpic from './refresh-dataset-epic';\nimport filterDatasetEpic from './filter-dataset-epic';\n\nconst rootEpic = combineEpics(\n  loadDatasetEpic,\n  fetchDatasetEpic,\n  uploadDatasetEpic,\n  searchDatasetEpic,\n  indexDatasetEpic,\n  refreshDatasetEpic,\n  filterDatasetEpic\n);\n\nexport default rootEpic;\n","import { createStore, applyMiddleware, compose } from \"redux\";\n\nimport { createEpicMiddleware } from 'redux-observable';\nimport rootReducer from './domain/root-reducer';\nimport rootEpic from './epics/root-epic';\n\n// Replace redux compose with redux-devtools compose if it exists\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst configureStore = (initialState = {}) => {\n  const middleware = createEpicMiddleware()\n\n  const store = createStore(rootReducer,\n    initialState,\n    composeEnhancers(\n      applyMiddleware(middleware)\n    )\n  );\n\n  middleware.run(rootEpic);\n\n  return store;\n};\n\nexport default configureStore;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport \"index.css\";\nimport App from \"./App\";\nimport registerServiceWorker from \"./registerServiceWorker\";\n\nimport configureStore from \"./configure-store\";\n\nconst store = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nregisterServiceWorker();\n\nif (module.hot) {\n  module.hot.accept(\"./App\", () => {\n    ReactDOM.render(\n      <Provider store={store}>\n        <App />\n      </Provider>,\n      document.getElementById(\"root\")\n    );\n  });\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"viz\":\"Visualization_viz__ukgQP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"App_appContainer__QtPXV\",\"controls\":\"App_controls__2wA6i\",\"section\":\"App_section__s3xOK\",\"dimSection\":\"App_dimSection__1zfwr\",\"hierarchySection\":\"App_hierarchySection__2fUkf\",\"canvas\":\"App_canvas__1fY9M\",\"hideControls\":\"App_hideControls__2GMem\",\"modal\":\"App_modal__z_4zM\",\"modalMain\":\"App_modalMain__3oa8j\",\"justifySpan\":\"App_justifySpan__3GGJs\",\"icon\":\"App_icon__3qmGE\",\"centerSpan\":\"App_centerSpan__37_5U\",\"accordionHeader\":\"App_accordionHeader__3V3d_\",\"hidden\":\"App_hidden__1emPK\",\"emptyDataset\":\"App_emptyDataset__3STIn\"};","import { createAction, handleActions } from \"redux-actions\";\n\nconst defaultState = {\n  hierarchyConfig: [], // Array of fields to group by.\n  shouldShowNodes: true, // Whether to show individual nodes\n  darkTheme: false, // Whether to use dark theme\n  colorBy: null // The field for which to color the devices/groupings by.\n};\n\n// ACTIONS\n\nconst setHierarchyConfig = createAction(\"SET_HIERARCHY_CONFIG\");\nconst showNodes = createAction(\"SHOW_NODES\");\nconst useDarkTheme = createAction(\"USE_DARK_THEME\");\nconst colorBy = createAction(\"COLOR_BY\");\n\nconst reducer = handleActions(\n  {\n    [setHierarchyConfig]: (state, { payload }) => ({ ...state, hierarchyConfig: payload }),\n    [showNodes]: (state, { payload }) => ({ ...state, shouldShowNodes: !!payload }), // Convert payload to boolean for easier debugging\n    [useDarkTheme]: (state, { payload }) => ({ ...state, darkTheme: !!payload }), // Convert payload to boolean for easier debugging\n    [colorBy]: (state, { payload }) => ({ ...state, colorBy: payload })\n  },\n  defaultState\n);\n\nconst selectControls = (state) => state.controls;\n\nexport default reducer;\nexport { setHierarchyConfig, showNodes, colorBy, useDarkTheme, selectControls };\n","import { createAction, handleActions } from \"redux-actions\";\n\nconst defaultState = {\n  error: null\n};\n\n// ACTIONS\nconst setError = createAction(\"SET_ERROR\");\nconst clearError = createAction(\"CLEAR_ERROR\");\n\n// REDUCERS\nconst reducer = handleActions(\n  {\n    [setError]: (state, { payload }) => {\n      if( payload instanceof Error )\n      {\n      \tconst error = payload;\n      \treturn { ...state, error };\n      }\n      return { ...state };\n    },\n    [clearError]: (state) => {\n      const error = null;\n      return { ...state, error };\n    }\n  },\n  defaultState\n);\n\n// SELECTORS\nconst getError = (state) => state.error.error;\n\n\nexport default reducer;\n\nexport { setError, getError, clearError};\n","import { ofType } from 'redux-observable';\nimport { isNil, isEmpty } from \"ramda\";\nimport { of } from \"rxjs\";\nimport { mergeMap, map } from 'rxjs/operators';\n\nimport { configurationFor } from \"domain/dataset\";\n\nconst getValue = require(\"get-value\");\nconst lunr = require(\"lunr\");\n\nconst BUILD_INDEX = \"BUILD_INDEX\";\nconst BUILD_INDEX_SUCCESS = \"BUILD_INDEX_SUCCESS\";\nconst REMOVE_SEARCH_INDEX = \"REMOVE_SEARCH_INDEX\";\n//const BUILD_INDEX_FAILURE = \"BUILD_INDEX_FAILURE\";\nconst SET_SEARCH_RESULTS = \"SET_SEARCH_RESULTS\";\n\nconst buildIndex = (payload) => ({'type': BUILD_INDEX, 'payload': payload })\nconst buildIndexSuccess = (payload) => ({'type': BUILD_INDEX_SUCCESS, 'payload': payload})\nconst removeSearchIndex = (payload) => ({'type': REMOVE_SEARCH_INDEX, 'payload': payload});\nconst setSearchResults = (payload) => ({'type': SET_SEARCH_RESULTS, 'payload': payload })\n\nconst getSearchResults = (state) => state.search.searchResults || [];\nconst getQueryString = (state) => state.search.queryString;\nconst getSearchIndex = (state, owner) => state.search.searchIndices[owner] || null;\nconst getSearchIndices = (state) => state.search.searchIndices || [];\n\nconst indexDatasetEpic = (action$, store) => {\n  return action$.pipe(\n      ofType(BUILD_INDEX)\n      ,mergeMap(({ payload }) => {\n        return of(payload).pipe(\n            map(generateIndex)\n            ,map((payload) =>\n              buildIndexSuccess(payload)\n            )\n          );\n      })\n    );\n};\n\nconst searchReducer = (state = { searchIndices: {}, queryString: '', searchResults: null }, action) => {\n  switch (action.type) {\n    case BUILD_INDEX_SUCCESS:\n      const biowner = action.payload.owner;\n      const searchIndex = action.payload.index;\n      state.searchIndices[biowner] = searchIndex;\n      return {...state };\n    case \n    SET_SEARCH_RESULTS:\n      const searchResults = action.payload.results;\n      const queryString = action.payload.queryString;\n      return { ...state, searchResults, queryString};\n    case \n    REMOVE_SEARCH_INDEX:\n      const rsowner = action.payload.owner;\n      if(state.searchIndices.hasOwnProperty(rsowner))\n        delete state.searchIndices[rsowner];\n\n      return { ...state }\n    default:\n      return state;\n  }\n}\n\nconst flattenDataset = (ds, cfg) => {\n  var flattened = [];\n\n  if(isNil(cfg))\n    return flattened;\n\n  for(var key in ds){\n    var item = {'id':key};\n    for(var f in cfg.fields){\n      var field = cfg.fields[f];\n\n      var name = field.displayName\n      item[name] = getValue(ds[key], field.displayName);\n    }\n    flattened.push(item);\n  }\n  return flattened;\n}\n\nconst generateIndex = (payload) => {\n  const owner = payload.owner;\n  const dataset = payload.dataset;\n  const configuration = !isNil(payload.configuration) && !isEmpty(payload.configuration) \n                        ? payload.configuration : configurationFor(dataset);\n  var flat = flattenDataset(dataset, configuration);\n  const idx = lunr(function () {\n    this.ref('id');\n    if(configuration && configuration.fields){\n      const filteredFields = configuration.fields.filter(f => !f.displayName.includes(\"/\"))\n      filteredFields.map((field) => { return this.field(field.displayName.toLowerCase()); })\n    }\n    flat.map((item) => { return this.add(item); })\n  });\n  return { owner: owner, index: idx };\n};\n\nexport default indexDatasetEpic;\n\nexport { buildIndex, searchReducer,  getSearchIndex, removeSearchIndex, getSearchIndices, setSearchResults, getSearchResults, getQueryString };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dataControls\":\"DatasetControls_dataControls__2WPxV\",\"selectorContainer\":\"DatasetControls_selectorContainer__3zdeO\",\"uploadContainer\":\"DatasetControls_uploadContainer__izwKQ\",\"selector\":\"DatasetControls_selector__1-ZPD\",\"fileUpload\":\"DatasetControls_fileUpload__1vorY\",\"label\":\"DatasetControls_label__3bRl3\",\"utilityContainer\":\"DatasetControls_utilityContainer__3RsyZ\",\"fileDownload\":\"DatasetControls_fileDownload__3N8pM\",\"urlRefreshContainer\":\"DatasetControls_urlRefreshContainer__2BOh7\",\"urlRefresh\":\"DatasetControls_urlRefresh__hpLj8\",\"urlContainer\":\"DatasetControls_urlContainer__2iQFV\",\"urlRefreshTime\":\"DatasetControls_urlRefreshTime__3heCp\",\"modal\":\"DatasetControls_modal__2nY-_\",\"modalMain\":\"DatasetControls_modalMain__3s5YH\",\"centerSpan\":\"DatasetControls_centerSpan__2HEg3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkboxContainer\":\"MiscControls_checkboxContainer__3qEun\",\"colorBy\":\"MiscControls_colorBy__36jis\",\"fieldSelect\":\"MiscControls_fieldSelect__23xNi\",\"switch\":\"MiscControls_switch__3u3nl\",\"switchLabel\":\"MiscControls_switchLabel__aj7RI\",\"switch-inner\":\"MiscControls_switch-inner__1-N2V\",\"selectorContainer\":\"MiscControls_selectorContainer__ktFZV\",\"selector\":\"MiscControls_selector__18lbV\"};","import { createAction } from 'redux-actions';\nimport { ofType } from 'redux-observable';\nimport { of } from 'rxjs';\nimport { ajax  as rxAjax } from 'rxjs/ajax';\nimport { catchError, debounceTime, mergeMap, map } from 'rxjs/operators';\n\nimport { setError } from \"domain/error\";\nimport { loadDataset } from './load-dataset-epic';\n\n// ACTIONS\nconst fetchDataset = createAction('FETCH_DATASET');\n\n// EPIC\nconst fetchDatasetEpic = (action$, store, ajax = rxAjax) => {\n  return action$.pipe(\n    ofType(fetchDataset.toString())\n    ,debounceTime(500)\n    ,mergeMap((action) => {\n      const owner = action.payload.owner;\n      const url = action.payload.url;\n      const header = action.payload.header;\n      return ajax({ 'url': url, 'headers':header, 'crossDomain': true, 'responseType': 'json' }).pipe(\n        map((result) => { \n          return { 'owner': owner, 'content': result.response };\n        })\n        ,map(loadDataset)\n        // I believe this was done oddly and debounce should have been used\n        // to ensure that file input was only processed once, instead of using take until\n        // which seems to be stopping the epic the second time the action passes through the stream\n        // it seems like this change doesn't change functionality and makes unit testing easier\n        // I intend to do more thorough user testing later\n        //.takeUntil(action$.ofType(fetchDataset.toString()))\n        \n      );\n    })\n    ,catchError((error) => {\n      const newErr = new Error(\"Error fetching dataset: \" + error.message);\n      return of(setError(newErr));\n    })\n  );\n}\n\nconst getScheme = (username, password, token) =>{\n   let scheme = 'None';\n    if(token) {\n      scheme = 'Bearer'\n    } else if (username && password) {\n      scheme = 'Basic'\n    }\n    return scheme;\n}\n\nconst buildAuthHeader = (username, password, token) => {\n  let header = null;\n  var scheme = getScheme(username, password, token);\n\n  switch (scheme){\n    case 'Basic':\n       var basic = \"Basic \" + new Buffer(`${username}:${password}`).toString(\"base64\");\n       header = {'Authorization' : basic};\n      break;\n    case 'Bearer':\n      var bearer = `Bearer ${token}`;\n      header = {'Authorization' : bearer};\n      break;\n    default:\n      header = null;\n      break;\n  }\n  \n  return header;\n}\n\nexport default fetchDatasetEpic;\nexport { fetchDataset, buildAuthHeader };\n","import { createAction } from \"redux-actions\";\nimport { ofType } from 'redux-observable';\nimport { of } from \"rxjs\";\nimport { map, mergeMap, catchError, concat } from 'rxjs/operators';\nimport { isNil, is } from \"ramda\";\n\nimport { buildIndex } from './index-dataset-epic';\n\nimport { setError } from \"domain/error\"\nimport { setDataset } from \"domain/dataset\";\nimport { setHierarchyConfig, colorBy } from \"domain/controls\";\n\nconst loadDataset = createAction(\"LOAD_DATASET\");\n\nconst loadDatasetEpic = (action$, store) => {\n  return action$.pipe(\n    ofType(loadDataset.toString())\n    ,mergeMap(({ payload }) => {\n      return of(payload).pipe(\n        map(formatPayload)\n        ,mergeMap((payload) => {\n          const owner = payload.owner;\n          return of(\n            setDataset({\n              owner: owner,\n              dataset: payload.dataset,\n              configuration: payload.configuration\n            })\n            ,buildIndex({\n                owner: owner,\n                dataset: payload.dataset,\n                configuration: payload.configuration || null\n            })\n          )\n        })\n        ,concat(of(setHierarchyConfig(store.value.controls.hierarchyConfig || []), colorBy(store.value.controls.colorBy)))\n        ,catchError((error) => {\n          if (is(ValidationError, error)) {\n            return of(setError(error));\n          } else {\n            /* istanbul ignore next */\n            throw error;\n          }\n        })\n      );\n    })\n  );\n}; \n\n// doesn't really care if it's not CSV; if it *is* CSV, convert to JSON.\n// Otherwise, just pass it along.\nconst CSVconvert = (data) => {\n  const owner = data.owner;\n  var lines = data.file.trim().split(/[\\r\\n]+/g);\n  if (lines.length < 2) { // bail if there's not even linebreaks\n    return data;\n  }\n\n  function finddelim(hdr) {\n    var delims = [',','|','\\t',';']\n    var delim = 0\n    var max = -1\n    for (var i=0; i < hdr.length; i++) {\n      if (max < hdr.split(delims[i]).length-1) {\n        max = hdr.split(delims[i]).length-1\n        delim = i\n      }\n    }\n    return delims[delim];\n  }\n\n  var delimiter = finddelim(lines[0])\n  var jsonstring = '['\n  var colnames = lines[0].split(delimiter)\n  for (var i=1; i < lines.length; i++) {\n    var entry = lines[i].split(delimiter)\n    if (entry.length !== colnames.length) { // malformed CSV, or not even CSV.\n      return data;\n    }\n    jsonstring += \"{ \"\n    for (var j=0; j < colnames.length; j++) {\n      jsonstring += '\"'+colnames[j]+'\": \"'+entry[j]+'\"';\n      if (j < colnames.length-1 ) {\n        jsonstring += \", \"\n      } else {\n        jsonstring += \" }\"\n        if (i < lines.length-1) {\n          jsonstring += \",\\n\"\n        }\n      }\n    }\n  }\n  jsonstring += ']'\n  return { 'owner': owner, 'file': jsonstring };\n}\n\n//if we have a naked array or an object not containing a dataset instead of an object containing a dataset\n//transfer the array into an object's dataset to maintain a consistent\n//schema with what is used elsewhere see https://github.com/CyberReboot/CRviz/issues/33\nconst formatPayload = (data) => {\n  const owner = data.owner;\n  const content = data.content;\n  const config = content.configuration;\n  var temp = {};\n  if(!isNil(content.dataset) && is(Array, content.dataset)){\n    temp = content.dataset;\n  } else if(isNil(content.dataset) && is(Array, content)) {\n    temp  = content;\n  } else if(isNil(content.dataset)) {\n    let obj = {};\n    Object.entries(content).forEach( (entry) =>{\n      let key = entry[0];\n      let value = entry[1]\n      obj[key] = value;\n      })\n    temp = [obj];\n  } else {\n    throw ValidationError('Data in invalid format');\n  }\n\n  data = { 'owner': owner, 'dataset': temp, 'configuration': config };\n  return data;\n};\n\nfunction ValidationError(message) {\n  this.name = 'ValidationError';\n  this.message = message;\n}\n\nValidationError.prototype = Object.create(Error.prototype);\n\nexport default loadDatasetEpic;\n\nexport { loadDataset, CSVconvert };\n","import { createAction, handleActions } from \"redux-actions\";\nimport {\n  chain,\n  concat,\n  find,\n  fromPairs,\n  identity,\n  is,\n  map,\n  merge,\n  path,\n  pipe,\n  propEq,\n  sortBy,\n  toPairs,\n  uniq\n} from \"ramda\";\n\nconst defaultState = {\n  datasets: {}\n};\nconst defaultItemState = {\n  owner: \"\",\n  dataset: [],\n  filtered: null,\n  values: {},\n  configuration: {\n    fields: []\n  },\n  isFetching: false,\n  lastUpdated: null\n};\n\n/**\n * Return a string that uniquely identify the field\n */\nconst getFieldId = (field) => {\n  if(field.path.length >= 1 && field.path[0])\n    return field.path.join(\".\")\n  else\n    return \" \";\n}\n\n/**\n * Returns an array of paths to literal values and arrays in a POJO.\n *\n * Example:\n * pathsIn({ a: 'A', b: { c: 'C', d: [1, 2] } }) //=> [['a'], ['b', 'c'], ['b', 'd']]\n */\nconst pathsIn = (obj) =>\n  chain(\n    ([key, value]) =>\n      is(Object, value) ? map(concat([key]), pathsIn(value)) : [[key]],\n    toPairs(obj)\n  );\n\n/**\n * Return all fields for an object\n */\nconst fieldsFor = (obj, overrides = []) => {\n  const paths = pathsIn(obj);\n  return map((path) => {\n    const override = find(propEq('path', path), overrides) || {};\n    return merge(\n      {\n        path: path,\n        displayName: path.join('.'),\n        groupable: true\n      },\n      override\n    )\n  }, paths);\n\n  // var fields = difference(pathsIn(obj), map(prop('path'), overrides));\n  // return [\n  //   ...overrid,\n  //   ...map(\n  //     (path) => ({\n  //       path: path,\n  //       displayName: path.join(\".\"),\n  //       groupable: true\n  //     }),\n  //     unspecified\n  //   )\n  // ];\n};\n\n/**\n * Returns a configuration with any missing items populated\n */\nconst configurationFor = (dataset, configuration = {}) => {\n  return {\n    ...configuration,\n    fields: fieldsFor(dataset[0] || {}, configuration.fields)\n  };\n};\n\n\nconst valuesFor = (dataset, configuration) => {\n  return fromPairs(map((field) => {\n    const values = pipe(\n      map(path(field.path)),\n      uniq,\n      sortBy(identity)\n    )(dataset);\n\n    return [getFieldId(field), values];\n  }, configuration.fields));\n};\n\n\n// ACTIONS\n\n/**\n * Payload: {\n *   dataset: [], // Array of devices\n *   configuration: {} // Configuration\n * }\n*/\nconst setDataset = createAction(\"SET_DATASET\");\nconst setFilteredDataset = createAction(\"SET_FILTERED_DATASET\");\nconst removeDataset = createAction(\"REMOVE_DATASET\");\nconst removeFilteredDataset = createAction(\"REMOVE_FILTERED_DATASET\");\nconst setIsFetching = createAction(\"SET_IS_FETCHING\");\n\n// REDUCERS\nconst reducer = handleActions(\n  {\n    [setDataset]: (state, { payload }) => {\n      const dataset = payload.dataset;\n      const owner = payload.owner;\n      const configuration = configurationFor(\n        payload.dataset || [],\n        payload.configuration || {}\n      );\n\n      const values = valuesFor(dataset, configuration);\n      const isFetching = false;\n      const lastUpdated = new Date();\n      state.datasets[owner] = {\n        dataset: dataset,\n        filtered: null,\n        values: values,\n        configuration: configuration,\n        isFetching: isFetching,\n        lastUpdated: lastUpdated\n      }\n      return { ...state};\n    },\n    [setFilteredDataset]: (state, { payload }) => {\n      const filtered = payload.filtered;\n      const owner = payload.owner;\n\n      state.datasets[owner].filtered = filtered;\n      return { ...state};\n    },\n    [removeDataset]: (state, { payload }) => {\n      const owner = payload.owner;\n      if(state.datasets.hasOwnProperty(owner))\n        delete state.datasets[owner];\n\n      return { ...state }\n    },\n    [removeFilteredDataset]: (state, { payload }) => {\n      const owner = payload.owner;\n      if(state.datasets.hasOwnProperty(owner))\n        state.datasets[owner].filtered = null;\n\n      return { ...state }\n    },\n    [setIsFetching]: (state, { payload }) => {\n      const owner = payload.owner;\n      const isFetching = !!payload.isFetching;\n      if(state.datasets.hasOwnProperty(owner))\n        state.datasets[owner].isFetching = isFetching;\n      return { ...state, isFetching};\n    }\n  },\n  defaultState\n);\n\n// SELECTORS\n\nconst selectDataset = (state, owner) => state.dataset.datasets[owner] && state.dataset.datasets[owner].dataset ? state.dataset.datasets[owner].dataset : defaultItemState.dataset;\nconst selectFilteredDataset = (state, owner) => state.dataset.datasets[owner] && state.dataset.datasets[owner].filtered ? state.dataset.datasets[owner].filtered : defaultItemState.filtered;\nconst selectConfiguration = (state, owner) => state.dataset.datasets[owner] && state.dataset.datasets[owner].configuration ? state.dataset.datasets[owner].configuration : defaultItemState.configuration;\nconst selectMergedConfiguration = (state) => {\n  let fields = [];\n  const ds = state.dataset.datasets;\n  for (var key in ds){\n    for (var f of ds[key].configuration.fields){ \n      // eslint-disable-next-line no-loop-func\n      if(!fields.some(field => field.displayName === f.displayName)){\n        fields.push(f);\n      }\n    }\n  }\n\n  return { fields: fields };\n}\nconst selectValues = (state, owner) => state.dataset.datasets[owner] && state.dataset.datasets[owner].values ? state.dataset.datasets[owner].values : defaultItemState.values;\nconst selectMergedValues = (state) => {\n  let vals = {};\n  const ds = state.dataset.datasets;\n  for (var key in ds){\n    for (var v in ds[key].values){\n      if(vals.hasOwnProperty(v)){\n        const valSet = new Set([...vals[v], ...ds[key].values[v]]);\n        vals[v] = [...valSet];\n      }\n      else {\n        vals[v] = ds[key].values[v];\n      }\n    }\n  }\n\n  return vals;\n}\nconst getIsFetching = (state, owner) => state.dataset.datasets[owner] && state.dataset.datasets[owner].isFetching ? state.dataset.datasets[owner].isFetching : defaultItemState.isFetching;\nconst getLastUpdated = (state, owner) => state.dataset.datasets[owner] && state.dataset.datasets[owner].lastUpdated ? state.dataset.datasets[owner].lastUpdated : defaultItemState.lastUpdated;\n\n\nexport default reducer;\n\nexport { setDataset, selectDataset, removeDataset, setFilteredDataset, selectFilteredDataset, removeFilteredDataset, selectConfiguration, selectMergedConfiguration, selectValues, \n  selectMergedValues, getFieldId, configurationFor, setIsFetching, getIsFetching, getLastUpdated };\n"],"sourceRoot":""}